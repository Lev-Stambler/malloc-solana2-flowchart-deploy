(this["webpackJsonpcandy-machine-mint"]=this["webpackJsonpcandy-machine-mint"]||[]).push([[0],{1005:function(t,e){},1006:function(t,e){},1007:function(t,e){},1011:function(t,e){},1028:function(t,e){},1029:function(t,e){},1049:function(t,e){},1050:function(t,e){},1069:function(t,e){},1070:function(t,e){},1108:function(t,e){},1109:function(t,e){},1112:function(t,e){},1113:function(t,e){},1132:function(t,e){},1133:function(t,e){},1152:function(t,e){},1153:function(t,e){},1154:function(t,e){},1158:function(t,e){},117:function(t,e,n){"use strict";n.d(e,"g",(function(){return p})),n.d(e,"f",(function(){return v})),n.d(e,"b",(function(){return m})),n.d(e,"h",(function(){return h})),n.d(e,"c",(function(){return x})),n.d(e,"a",(function(){return g})),n.d(e,"e",(function(){return k})),n.d(e,"d",(function(){return A}));var r=n(0),c=n.n(r),a=n(17),o=n(13),i=n(5),u=n(305),s=n(67),l=n(596),d=n(40),f=n(66),b=n(37),j=s.ASSOCIATED_TOKEN_PROGRAM_ID,p=function(){var t=Object(i.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!b.i.state.tokenList){t.next=2;break}return t.abrupt("return",b.i.state.tokenList);case 2:return t.next=4,(new l.b).resolve();case 4:if(n=t.sent,r=n.filterByClusterSlug(Object(f.a)().solana.NETWORK).getList(),b.i.setState(Object(o.a)(Object(o.a)({},b.i.state),{},{tokenList:r})),"devnet"!==Object(f.a)().solana.NETWORK){t.next=18;break}return t.t0=[],t.t1=Object(a.a)(r),t.t2=a.a,t.next=13,O(e);case 13:return t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.abrupt("return",t.t0.concat.call(t.t0,t.t1,t.t4));case 18:return t.abrupt("return",r);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=Object(i.a)(c.a.mark((function t(e){var n,r,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new d.PublicKey(Object(f.a)().demo.FAKE_USDC),r=new d.PublicKey(Object(f.a)().demo.FAKE_TOKEN_A),t.next=4,A(e,n);case 4:return a=t.sent,t.next=7,A(e,r);case 7:if(i=t.sent,a&&i){t.next=10;break}throw"Expected info for these mints";case 10:return t.abrupt("return",[Object(o.a)(Object(o.a)({},a),{},{chainId:-1,name:"FAKE USDC",symbol:"FUSDC",address:Object(f.a)().demo.FAKE_USDC}),Object(o.a)(Object(o.a)({},i),{},{chainId:-1,name:"FAKE A TOKEN",symbol:"FA TOKEN",address:Object(f.a)().demo.FAKE_TOKEN_A})]);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(i.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l.a,t.next=3,p(e);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=Object(i.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.PublicKey.findProgramAddress([e.toBuffer(),s.TOKEN_PROGRAM_ID.toBuffer(),new d.PublicKey(n).toBuffer()],j);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),h=function(t,e){var n=t.toString(),r=n.substring(0,n.length-e)||"0",c=n.substring(n.length-e).padStart(e,"0").substring(0,e);return"".concat(function(t){for(var e=/(-?\d+)(\d{3})/;e.test(t);)t=t.replace(e,"$1,$2");return t}(r),".").concat(c).replace(/\.?0*$/,"")},x=function(t,e){var n,r=t.toString().split("."),c=r[0],a=r[1]||"";if(r.length>2||a.length>e)throw new Error("Cannot parse '".concat(t,"' as token amount"));return""===(n=(n=c+a.padEnd(e,"0")).replace(/^0+/,""))?"0":n},g=function(){var t=Object(i.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all(n.map((function(t){return m(e,t)}))));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),k=function(){var t=Object(i.a)(c.a.mark((function t(e,n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.connection.getAccountInfo(n);case 2:if(r=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:return t.prev=5,a=Object(u.parseTokenAccount)(r.data),t.abrupt("return",a);case 10:return t.prev=10,t.t0=t.catch(5),console.error("An error occured parsing the data, returning null",t.t0),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(e,n){return t.apply(this,arguments)}}(),A=function(){var t=Object(i.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.connection.getAccountInfo(n);case 2:if(r=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:return t.abrupt("return",Object(u.parseMintAccount)(r.data));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},1175:function(t,e){},1176:function(t,e){},120:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return o}));var r=function(t){return t.split("-")[0]},c=function(t,e){return"".concat(t,"-").concat(e)},a=function(t){return c(t,Math.random().toString())},o=function(t,e){return"edge~".concat(t,"^").concat(e)}},1210:function(t,e){},1290:function(t,e){},1292:function(t,e){},1306:function(t,e){},1310:function(t,e){},1312:function(t,e){},1322:function(t,e){},1324:function(t,e){},1351:function(t,e){},1353:function(t,e){},1358:function(t,e){},1360:function(t,e){},1367:function(t,e){},1368:function(t,e){},1370:function(t,e){},1382:function(t,e){},1385:function(t,e){},1397:function(t,e){},1404:function(t,e,n){"use strict";n.r(e);var r=n(4),c=n.n(r),a=n(55),o=n.n(a),i=(n(891),n(892),n(13)),u=n(0),s=n.n(u),l=n(5),d=n(18),f=n(350),b=n(592),j=n(1438),p=n(1439),O=n(40),v=n(93),m=n(425),h=n(297),x=n(96),g=n(138),k=n(306),A=n(66),w=n(37),S=n(696),y=n(847),I=n(575),T=n(1418),E=n(117),C=n(187),P=n(67),K=n(27);function R(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var _=Object(S.a)((function(t){return Object(y.a)({paper:{position:"absolute",width:"auto",backgroundColor:t.palette.background.paper,border:"2px solid #000",boxShadow:t.shadows[5],padding:t.spacing(2,4,3)}})})),D=function(t){var e=t.tok,n=t.setChoosen;return Object(K.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",width:"100%",gap:"5px"},children:[Object(K.jsx)("button",{onClick:n,children:"Choose"}),Object(K.jsx)("div",{children:e.info.name}),Object(K.jsxs)("div",{children:[Object(h.b)(e.account),e.balance?"":" (currently nonexistent)"]}),Object(K.jsx)("div",{children:Object(E.h)(new P.u64(e.balance||0),e.info.decimals)})]})};function L(t){var e,n=null===(e=t.onlyWithInitializedAccounts)||void 0===e||e,a=_(),o=c.a.useState(R),u=Object(d.a)(o,1)[0],f=c.a.useState(!1),b=Object(d.a)(f,2),j=b[0],p=b[1],m=c.a.useState(""),h=Object(d.a)(m,2),g=h[0],k=h[1],A=c.a.useState(""),S=Object(d.a)(A,2),y=S[0],L=S[1],N=Object(v.useAnchorWallet)(),M=Object(r.useState)(-1),B=Object(d.a)(M,2),F=B[0],W=B[1],U=Object(x.useStore)(w.i),G=Object(C.a)(N),Y=function(){var t=Object(l.a)(s.a.mark((function t(){var e,r,c,a,o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(E.g)(G);case 2:return e=t.sent,t.next=5,Object(E.a)(null===N||void 0===N?void 0:N.publicKey,e.map((function(t){return t.address})));case 5:return r=t.sent,t.next=8,Promise.all(r.map(function(){var t=Object(l.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(E.e)(G,e);case 2:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.amount);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 8:c=t.sent,a=r.map((function(t,n){return{account:t.toBase58(),info:e[n],balance:c[n]}})),o=n?a.filter((function(t){return t.balance})):a,u=o.map((function(t){var e;return Object(i.a)(Object(i.a)({},t),{},{info:Object(i.a)(Object(i.a)({},t.info),{},{mint:new O.PublicKey(t.info.address)}),balance:(null===(e=t.balance)||void 0===e?void 0:e.toString())||null})})),w.i.setState(Object(i.a)(Object(i.a)({},U),{},{derivedTokenAccounts:u}));case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){Y()}),[]);var q=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r,c,a,o,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U.derivedTokenAccounts){e.next=3;break}return p(!1),e.abrupt("return");case 3:if(!(F>=0)){e.next=7;break}t.onClose(U.derivedTokenAccounts[F]),e.next=42;break;case 7:if(n=-1===F?"TOKEN":"MINT",console.log(n),("TOKEN"!==n||g)&&("MINT"!==n||y)){e.next=12;break}return p(!1),e.abrupt("return");case 12:if("TOKEN"!==n){e.next=16;break}e.t0=g,e.next=19;break;case 16:return e.next=18,Object(E.b)(N.publicKey,y);case 18:e.t0=e.sent.toBase58();case 19:return r=e.t0,console.log("AAAAA",r,y),e.next=23,Object(E.e)(G,new O.PublicKey(r));case 23:if(c=e.sent,"TOKEN"!==n||c){e.next=28;break}return alert("Looks like an invalid SPL Token Account was provided"),p(!1),e.abrupt("return");case 28:if("MINT"!==n||!1===t.onlyWithInitializedAccounts||c){e.next=32;break}return alert("Looks like there is no initialized associated account with this mint"),p(!1),e.abrupt("return");case 32:return a="TOKEN"===n?c.mint:new O.PublicKey(y),e.next=35,Object(E.d)(G,a);case 35:if(o=e.sent){e.next=40;break}return alert("Looks like the mint associated with this token is invalid"),p(!1),e.abrupt("return");case 40:u=(null===c||void 0===c?void 0:c.amount)||new P.u64(0),t.onClose({balance:u,account:r,info:Object(i.a)(Object(i.a)({},o),{},{mint:a})});case 42:p(!1);case 43:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=Object(K.jsxs)("div",{style:u,className:a.paper,children:[Object(K.jsx)("h2",{id:"simple-modal-title",children:"Choose a token account"}),Object(K.jsx)("p",{id:"simple-modal-description",children:"Choose from either your associated token accounts or add a custom address"}),Object(K.jsxs)("div",{className:"options",style:{overflow:"scroll",maxHeight:"70vh"},children:[Object(K.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr"},children:[Object(K.jsx)("span",{}),Object(K.jsx)("div",{children:"Mint Name"}),Object(K.jsx)("div",{children:"Token Account Address"}),Object(K.jsx)("div",{children:"Amount"})]}),U.derivedTokenAccounts?U.derivedTokenAccounts.map((function(t,e){return Object(K.jsxs)("div",{style:{padding:"0.5rem",border:F===e?"1px solid black":"0px"},children:[Object(K.jsx)(D,{tok:t,setChoosen:function(){return W(e)}}),Object(K.jsx)("br",{})]},"token-derived-account-".concat(e))})):"Loading...",Object(K.jsx)("div",{style:{padding:"0.5rem",border:-1===F?"1px solid black":"0px"},children:Object(K.jsx)(T.a,{label:"Custom Token Account",value:g,onChange:function(t){return k(t.target.value)},onFocus:function(){return W(-1)}})}),Object(K.jsx)("p",{children:"Or"}),Object(K.jsx)("div",{style:{padding:"0.5rem",border:-2===F?"1px solid black":"0px"},children:Object(K.jsx)(T.a,{label:"Custom Mint Account",value:y,onChange:function(t){return L(t.target.value)},onFocus:function(){return W(-2)}})})]})]});return Object(K.jsxs)("div",{children:[Object(K.jsx)("button",{type:"button",onClick:function(){Y(),p(!0)},children:t.buttonText||"Choose Token Account"}),Object(K.jsx)(I.a,{open:j,onClose:q,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:J})]})}var N,M,B,F=n(70),W=function(t){var e=Object(v.useAnchorWallet)(),n=Object(r.useState)(null),c=Object(d.a)(n,2),a=c[0],o=c[1];Object(r.useEffect)((function(){null!==t.toggleNodeInfoSet&&i()}),[t.toggleNodeInfoSet,a]);var i=function(){var n=Object(l.a)(s.a.mark((function n(){var r,c,o,i;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("kk",a,t.tokenAccount,e),a&&t.tokenAccount&&e){n.next=3;break}return n.abrupt("return");case 3:if(Object(w.h)(!0),console.log("kk"),t.mint){n.next=8;break}return Object(w.h)(!1),n.abrupt("return");case 8:return console.log("LLL",t.mint.toBase58(),a.info.mint.toBase58()),r=Object(C.a)(e),n.t0=k.buildSwapAccounts,n.t1=r,n.next=14,Object(E.f)(r);case 14:return n.t2=n.sent,n.t3=e.publicKey,n.t4=t.tokenAccount,n.t5=new O.PublicKey(a.account),n.t6=t.mint,n.t7=a.info.mint,n.t8=new O.PublicKey(Object(A.a)().projectSerum.DEX_PROGRAM_ID),n.t9=F.e.SYSVAR_RENT_PUBKEY,n.t10={provider:n.t1,tokenList:n.t2,authority:n.t3,inTokenAccount:n.t4,outTokenAccount:n.t5,inMint:n.t6,outMint:n.t7,serumDexProgramId:n.t8,rent:n.t9},n.next=25,(0,n.t0)(n.t10);case 25:c=n.sent,o=k.Side.Bid,i=Object(k.packSwapData)(k.SwapInstructionByte.BasicSwap,o,new P.u64(0)),console.log("DATA:",i),t.nodeInfoStoreState[t.id]={action:{actionData:i,actionProgram:new O.PublicKey(Object(A.a)().mallocSpl.SWAP_PROGRAM_ID),actionAccounts:Object(k.swapAccountsToActionAccounts)(c.swapAccounts,o).slice(3),tokenAccountsOuts:[new O.PublicKey(a.account)],signers:[c.openOrderAccount],tokenMintOuts:[a.info.mint]}},w.c.setState(t.nodeInfoStoreState),Object(w.h)(!1);case 32:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(K.jsxs)("div",{children:[Object(K.jsxs)("h4",{children:["Swap ",t.mintName," to"," ",(null===a||void 0===a?void 0:a.info.name)||(null===a||void 0===a?void 0:a.info.mint.toBase58())||"<Out token not set>"]}),Object(K.jsx)(L,{onClose:function(t){return o(t)},buttonText:"Choose output token",onlyWithInitializedAccounts:!1}),Object(K.jsx)(g.a,{type:"source",position:g.b.Bottom,id:"b"})]})},U=n(1433),G=n(1434),Y=n(1435),q=n(304),J=n(120),z=function(t){return"edge"===t.split("~")[0]},H=function(t){return t.split("~")[1].split("^")},V=function(t,e){return t.filter((function(t){return z(t.id)&&H(t.id)[0]===e})).map((function(t){return t.id}))},X=function(t,e){return V(t,e).map((function(t){return H(t)[1]}))},Q=function(t,e){return t.filter((function(t){return z(t.id)&&H(t.id)[1]===e})).map((function(t){return t.id}))},Z=function(){return w.a.state.elements.filter((function(t){return!z(t.id)&&"splitter"!==Object(J.c)(t.id)})).map((function(t){return t.id}))},$=function(t){var e=w.a.state.elements,n=Q(e,t).map((function(t){var e,n=H(t)[0],r=null===(e=w.c.state[n].splitter)||void 0===e?void 0:e.mint;return r||null}));if(0===n.length)return null;var r=n.find((function(t){return!!t}));if(!r)return null;if(n.filter((function(t){return!!t})).some((function(t){return!t.equals(r)})))throw"Inconsistent prior token mint address for node with id ".concat(t);return n.some((function(t){return!t}))?null:r},tt=function(t){var e=w.a.state.elements,n=Q(e,t).map((function(t){var e,n=H(t)[0],r=null===(e=w.c.state[n].splitter)||void 0===e?void 0:e.tokenAccount;return r||null}));if(0===n.length)return null;var r=n.find((function(t){return!!t}));if(!r)return null;if(n.filter((function(t){return!!t})).some((function(t){return!t.equals(r)})))throw"Inconsistent prior token account address for node with id ".concat(t);return n.some((function(t){return!t}))?null:r},et=function(){var t=function(){var t=Z();return t.map((function(e){var n=X(w.a.state.elements,e);console.log(n);var r=n.map((function(t){return X(w.a.state.elements,t)})).map((function(e,r){var c;console.log(r,n);var a=n[r],o=null===(c=w.c.state[a].splitter)||void 0===c?void 0:c.splits;if(!o)throw"Expected to find splitter information";return e.map((function(e,n){return{actionIdx:t.indexOf(e),fraction:new F.a(o[n])}}))}));return{nodeId:e,ripeAmount:Q(w.a.state.elements,e).length,nextNodes:r}}))}(),e=function(){var t,e=null===(t=w.c.state[Object(J.b)("splitter",Object(A.a)().INITIAL_SPLITTER_ID_UUID)].splitter)||void 0===t?void 0:t.splits;if(!e)throw"Expected to get the splits from the initial splitter";return[e,V(w.a.state.elements,Object(J.b)("splitter",Object(A.a)().INITIAL_SPLITTER_ID_UUID)).map((function(t){return H(t)[1]}))]}(),n=Object(d.a)(e,2),r=n[0],c=n[1],a=Z(),o=a.map($),u=a.map((function(e,n){var r,c=null===(r=w.c.state[e])||void 0===r?void 0:r.action;if(!c)throw"Missing action info for node of id ".concat(e);var a=o[n];if(!a)throw"Missing input token mint for node of id ".concat(a);return Object(i.a)(Object(i.a)({},c),{},{actionMetadata:t[n],tokenMintIn:a})}));console.log("LLL",u);var s=c.map((function(t){return a.indexOf(t)}));console.log(t,s,r),s.forEach((function(t){if(t<0)throw"An unexpected error occured in building the action list"}));var l=w.a.state.initTokenAccount;if(!l)throw"Init token account not set";return{actions:u,initialSplits:r,initialActionIndices:s,amount:new P.u64(w.a.state.initAmount),amountInAccount:l}},nt=function(){var t=Object(l.a)(s.a.mark((function t(e){var n,r,c,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(w.g)(!0),t.prev=1;case 2:if(!w.b.state.storeUpdateLoading){t.next=7;break}return t.next=5,new Promise((function(t,e){return setTimeout(t,50)}));case 5:t.next=2;break;case 7:return n=et(),r=Object(h.a)(e),t.next=11,r.buildTxs(Object(i.a)(Object(i.a)({},n),{},{opts:{associatedTokenAccounts:(w.i.state.derivedTokenAccounts||[]).reduce((function(t,e){return t[e.info.mint.toBase58()]=new O.PublicKey(e.account),t}),{})}}));case 11:return c=t.sent,console.log(c,"Loading..."),t.next=15,r.sendRequests(c,{skipPreflight:!0,commitment:"confirmed",preflightCommitment:"confirmed"});case 15:return a=t.sent,Object(w.g)(!1),t.abrupt("return",a);case 20:throw t.prev=20,t.t0=t.catch(1),Object(w.g)(!1),t.t0;case 24:case"end":return t.stop()}}),t,null,[[1,20]])})));return function(e){return t.apply(this,arguments)}}(),rt=n(305),ct=new Uint8Array([8,57,204,222,105,129,113,8,245,54,20,45,122,175,82,37,32,44,46,6,54,35,168,208,213,194,164,50,97,226,134,119,136,196,213,189,243,233,16,53,22,220,245,4,17,203,251,233,20,7,178,5,36,19,66,89,210,148,19,225,117,61,214,253]),at=new F.c(O.Keypair.fromSecretKey(ct)),ot=function(t){return new rt.Provider(new O.Connection(t),at,{})},it=function(){var t=Object(l.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ut(new O.PublicKey(Object(A.a)().demo.FAKE_USDC),e,ot(Object(A.a)().solana.RPC));case 3:return n=t.sent,t.next=6,st(new O.PublicKey(Object(A.a)().demo.FAKE_USDC_GD),[n]);case 6:alert("Done with your airdrop"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0),alert("An error occurred with the airdrop ".concat(JSON.stringify(t.t0)));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),ut=function(){var t=Object(l.a)(s.a.mark((function t(e,n,r){var c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.PublicKey.findProgramAddress([n.toBuffer(),P.TOKEN_PROGRAM_ID.toBuffer(),new O.PublicKey(e).toBuffer()],P.ASSOCIATED_TOKEN_PROGRAM_ID);case 2:return c=t.sent[0],t.next=5,r.connection.getAccountInfo(c);case 5:if(t.sent){t.next=10;break}return t.next=9,Object(rt.createTokenAccount)(r,e,n);case 9:return t.abrupt("return",t.sent);case 10:return t.abrupt("return",c);case 11:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),st=function(){var t=Object(l.a)(s.a.mark((function t(e,n){var r,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return 6,r=1*Math.pow(10,6),c=new O.Transaction,n.map((function(t){c.add(P.Token.createTransferInstruction(P.TOKEN_PROGRAM_ID,e,t,at.publicKey,[],r))})),t.next=6,ot(Object(A.a)().solana.RPC).send(c,[],{skipPreflight:!0});case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),lt=function(t){var e=Object(v.useWallet)(),n=Object(v.useAnchorWallet)(),c=Object(x.useStore)(w.b),a=Object(r.useState)(!1),o=Object(d.a)(a,2),i=o[0],u=o[1];return Object(K.jsx)(G.a,{style:{maxWidth:"300px"},children:Object(K.jsxs)(Y.a,{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem"},children:[Object(K.jsx)(U.a,{onClick:function(){return t.pushElemsFn(Object(q.b)())},children:"Add Transfer Action"}),Object(K.jsx)(U.a,{onClick:function(){return t.pushElemsFn(Object(q.a)())},children:"Add Swap Action"}),Object(K.jsx)(U.a,{onClick:function(){if(!n)throw"Expected the wallet to be connected";var t=new F.b(new O.Connection(Object(A.a)().solana.RPC),n,{skipPreflight:!0,preflightCommitment:"confirmed"});nt(t).then((function(t){alert("Ran successfully!")})).catch((function(t){alert("An error occured: ".concat(t)),console.error(t)}))},disabled:c.storeUpdateLoading,children:"Compile and Run"}),Object(K.jsx)("br",{}),Object(K.jsx)(U.a,{onClick:function(){u(!0),it(n.publicKey).then((function(){return u(!1)}))},disabled:i,children:"Airdrop fake USDC"}),Object(K.jsx)("br",{}),Object(K.jsx)(U.a,{onClick:function(){return t.setElemsFn([Object(q.c)()])},color:"secondary",children:"Delete all"}),Object(K.jsx)(U.a,{onClick:function(){return e.disconnect()},color:"secondary",children:"Sign Out"})]})})},dt=n(17),ft=function(t){return function(e){var n,c,a,o,u,f,b=Object(x.useStore)(w.a),j=Object(x.useStore)(w.c),p=Object(v.useAnchorWallet)(),m=Object(r.useState)(0),h=Object(d.a)(m,2),k=h[0],A=h[1],S=Object(r.useState)(0),y=Object(d.a)(S,2),I=y[0],R=y[1],_=Object(r.useState)([]),D=Object(d.a)(_,2),N=D[0],M=D[1],B=Object(r.useState)(null),F=Object(d.a)(B,2),W=F[0],U=F[1],G=Object(x.useStore)(w.a),Y=Object(x.useStore)(w.c);Object(r.useEffect)((function(){var t;if((null===(t=e.data)||void 0===t?void 0:t.isInitial)&&W){var n=Object(E.c)(I,W.info.decimals),r=new P.u64(n);w.a.setState(Object(i.a)(Object(i.a)({},b),{},{initAmount:r}))}}),[I,W]),Object(r.useEffect)((function(){var t;(null===W||void 0===W?void 0:W.account)&&(null===(t=e.data)||void 0===t?void 0:t.isInitial)&&w.a.setState(Object(i.a)(Object(i.a)({},b),{},{initTokenAccount:new O.PublicKey(null===W||void 0===W?void 0:W.account)}))}),[W]);var q=function(t,n){var r=V(b.elements,e.data.id);if(r.length<t)throw alert("The flow chart is malformed, please start over"),"The flow chart is malformed, please start over";var c=r[t],a=b.elements.findIndex((function(t){return t.id===c})),o=b.elements[a];o.animated=n,Object(w.e)(o,a)};Object(r.useEffect)((function(){e.data.isInitial||Object(l.a)(s.a.mark((function t(){var n,r,c,a,o,u,l,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(E.g)(Object(C.a)(p));case 2:if(t.sent,s=G.elements,f=e.data.id,0!==(o=Q(s,f).map((function(t){return H(t)[0]}))).length){t.next=6;break}return t.abrupt("return");case 6:if(!(u=o.map((function(t){return Y[t]}))).some((function(t){return!t||!t.action}))){t.next=9;break}return t.abrupt("return");case 9:if(u.every((function(t){return t.action.tokenMintOuts[0]===u[0].action.tokenMintOuts[0]}))){t.next=11;break}throw"Expected all input mints to be the same into splitter";case 11:if(0!==u[0].action.tokenMintOuts.length){t.next=13;break}return t.abrupt("return");case 13:if(l=u[0].action.tokenMintOuts[0],d=u[0].action.tokenAccountsOuts[0],j[e.data.id]={splitter:{splits:N,tokenAccount:d,mint:null!==l&&void 0!==l?l:void 0}},console.log("Setting Splitter Mint",l.toBase58(),"with id",e.data.id),(null===(n=Y[e.data.id].splitter)||void 0===n||null===(r=n.mint)||void 0===r?void 0:r.toBase58())!==l.toBase58()||(null===(c=Y[e.data.id].splitter)||void 0===c||null===(a=c.tokenAccount)||void 0===a?void 0:a.toBase58())!==d.toBase58()){t.next=19;break}return t.abrupt("return");case 19:console.log("Setting Splitter Mint",l.toBase58()),w.c.setState(Object(i.a)({},j));case 21:case"end":return t.stop()}var s,f}),t)})))()}),[G,Y]),Object(r.useEffect)((function(){var t=e.data.isInitial?null===W||void 0===W?void 0:W.info.mint:void 0,n=e.data.isInitial&&W?new O.PublicKey(W.account):void 0;j[e.data.id]={splitter:{splits:N,tokenAccount:n,mint:null!==t&&void 0!==t?t:void 0}},w.c.setState(Object(i.a)({},j))}),[N]),Object(r.useEffect)((function(){var t=V(b.elements,e.data.id).length,n=t-k;M(n<0?Object(dt.a)(N.slice(0,N.length+n)):[].concat(Object(dt.a)(N),Object(dt.a)(Array(n).fill(100)))),A(t)}),[b]);return Object(K.jsxs)("div",{style:{padding:"1rem"},children:[Object(K.jsx)("h4",{children:(null===(n=e.data)||void 0===n?void 0:n.isInitial)?"Initial Splitter":"Splitter"}),(null===(c=e.data)||void 0===c?void 0:c.isInitial)&&Object(K.jsx)(L,{onClose:U}),(null===(a=e.data)||void 0===a?void 0:a.isInitial)&&Object(K.jsx)("div",{style:{paddingBottom:"3rem"},children:Object(K.jsx)(T.a,{label:"amount in of ".concat(null!==(o=null!==(u=null===W||void 0===W?void 0:W.info.name)&&void 0!==u?u:null===W||void 0===W?void 0:W.info.mint.toBase58())&&void 0!==o?o:"<Input token account not set>"),type:"number",value:I,onChange:function(t){try{if(!t.target.value)return;var e=parseFloat(t.target.value);R(e)}catch(t){alert("Looks like an invalid number was inputted")}}})}),!(null===(f=e.data)||void 0===f?void 0:f.isInitial)&&Object(K.jsx)(g.a,{type:"target",position:g.b.Top}),new Array(k).fill(0).map((function(t,e){return Object(K.jsx)("div",{children:Object(K.jsx)(T.a,{type:"number",label:"Fractional Amount",onFocus:function(){return q(e,!0)},onBlur:function(){return q(e,!1)},value:N[e],onChange:function(t){return function(t,e){N[e]=parseInt(t.target.value),M(Object(dt.a)(N))}(t,e)}})},"splitter-frac-".concat(e))})),Object(K.jsx)(g.a,{type:"source",position:g.b.Bottom,onConnect:function(e){!function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t.source||!t.target||(n?"splitter"===Object(J.c)(t.source||""):"splitter"===Object(J.c)(t.target||"")))return!1;var r={id:Object(J.a)(t.source,t.target),source:t.source,target:t.target};e([r])}(e,t,!1)},id:"a",style:{left:"50%"}})]})}},bt=function(t,e){return function(t){var n=Object(x.useStore)(w.c),c=Object(v.useAnchorWallet)(),a=Object(r.useState)($(t.id)),o=Object(d.a)(a,2),i=o[0],u=o[1],f=Object(r.useState)(null),b=Object(d.a)(f,2),j=b[0],p=b[1],O=Object(r.useState)("<not set>"),m=Object(d.a)(O,2),h=m[0],k=m[1],A=Object(r.useState)(null),S=Object(d.a)(A,2),y=S[0],I=S[1],T=Object(x.useStore)(w.a),P=function(){var e=Object(l.a)(s.a.mark((function e(){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.g)(Object(C.a)(c));case 2:return n=e.sent,r=n.find((function(t){return t.address===(null===i||void 0===i?void 0:i.toBase58())})),e.t0=p,e.next=7,tt(t.id);case 7:e.t1=e.sent,(0,e.t0)(e.t1),k((null===r||void 0===r?void 0:r.name)||(null===i||void 0===i?void 0:i.toBase58())||"<not set>"),I(!y);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){P()}),[i]),Object(r.useEffect)((function(){i&&I(!y),P()}),[]),Object(r.useEffect)((function(){var e=$(t.id);!e||i&&!1!==(null===e||void 0===e?void 0:e.equals(i))||(u(e),I(!y))}),[T,n]),Object(K.jsxs)("div",{className:"flow-chart-node",children:[Object(K.jsx)(g.a,{type:"target",position:g.b.Top,style:{borderRadius:0}}),Object(K.jsx)(e,{tokenAccount:j,id:t.id,flowState:T,nodeInfoStoreState:n,mintName:h,toggleNodeInfoSet:y,mint:i})]})}},jt=n(865),pt=function(){var t=Object(x.useStore)(w.a);Object(r.useEffect)((function(){}),[]);var e={swap:bt(w.d,W),transfer:bt(w.d,jt.a),splitter:ft(w.d)};return Object(K.jsxs)("div",{style:{height:"100%",width:"100%",padding:"1rem"},children:[Object(K.jsx)("div",{style:{position:"absolute",zIndex:100},children:Object(K.jsx)(lt,{pushElemsFn:w.d,setElemsFn:w.f})}),Object(K.jsx)(g.c,{elements:t.elements,nodeTypes:e})]})},Ot=n(866),vt=n.n(Ot),mt=n(574),ht=function(){return Object(K.jsxs)("div",{className:"full-screen greyed",style:{display:"grid",justifyContent:"center",alignContent:"center",justifyItems:"center",gridTemplateColumns:"1fr"},children:[Object(K.jsx)(vt.a,{loading:!0,css:Object(mt.css)(N||(N=Object(f.a)(["\n\t\t\t\theight: 200px;\t\n\t\t\t"]))),size:80}),Object(K.jsx)("h3",{children:"Waiting while the Solana Network eats your gas fees"})]})},xt=Object(b.a)(m.WalletDialogButton)(M||(M=Object(f.a)([""]))),gt=(b.a.span(B||(B=Object(f.a)([""]))),function(t){var e,n=Object(r.useState)(),c=Object(d.a)(n,2),a=c[0],o=c[1],u=Object(r.useState)(!1),f=Object(d.a)(u,2),b=(f[0],f[1],Object(r.useState)(!1)),m=Object(d.a)(b,2),g=(m[0],m[1],Object(r.useState)(!1)),k=Object(d.a)(g,2),A=(k[0],k[1],Object(x.useStore)(w.b)),S=Object(r.useState)({open:!1,message:"",severity:void 0}),y=Object(d.a)(S,2),I=y[0],T=y[1],E=Object(r.useState)(new Date(t.startDate)),C=Object(d.a)(E,2),P=(C[0],C[1],Object(v.useWallet)()),R=Object(r.useState)(),_=Object(d.a)(R,2);_[0],_[1];return Object(r.useEffect)((function(){Object(l.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===P||void 0===P?void 0:P.publicKey)){e.next=5;break}return e.next=3,t.connection.getBalance(P.publicKey);case 3:n=e.sent,o(n/O.LAMPORTS_PER_SOL);case 5:case"end":return e.stop()}}),e)})))()}),[P,t.connection]),Object(K.jsxs)("main",{children:[P.connected&&Object(K.jsxs)("p",{style:{marginTop:0},children:["Address: ",Object(h.b)((null===(e=P.publicKey)||void 0===e?void 0:e.toBase58())||"")]}),P.connected&&Object(K.jsxs)("p",{children:["Balance: ",(a||0).toLocaleString()," SOL"]}),P.connected&&Object(K.jsx)(pt,{}),!P.connected&&Object(K.jsx)(xt,{children:"Connect Wallet"}),A.ephemeralRunLoading&&Object(K.jsx)(ht,{}),Object(K.jsx)(j.a,{open:I.open,autoHideDuration:6e3,onClose:function(){return T(Object(i.a)(Object(i.a)({},I),{},{open:!1}))},children:Object(K.jsx)(p.a,{onClose:function(){return T(Object(i.a)(Object(i.a)({},I),{},{open:!1}))},severity:I.severity,children:I.message})})]})}),kt=n(457),At=new F.e.PublicKey(Object(A.a)().MALLOC_PROGRAM_ID),wt=Object(A.a)().solana.NETWORK,St=Object(A.a)().solana.RPC,yt=new F.e.Connection(St),It=parseInt("1630422000000",10),Tt=function(){var t=Object(r.useMemo)((function(){return Object(O.clusterApiUrl)(wt)}),[]),e=Object(r.useMemo)((function(){return[Object(kt.getPhantomWallet)(),Object(kt.getSolflareWallet)(),Object(kt.getSolletWallet)()]}),[]);return Object(K.jsx)(v.ConnectionProvider,{endpoint:t,children:Object(K.jsx)(v.WalletProvider,{wallets:e,autoConnect:!0,children:Object(K.jsx)(m.WalletDialogProvider,{children:Object(K.jsx)(gt,{config:At,connection:yt,startDate:It,txTimeout:3e4})})})})},Et=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,1441)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),r(t),c(t),a(t),o(t)}))};o.a.render(Object(K.jsx)(c.a.StrictMode,{children:Object(K.jsx)(Tt,{})}),document.getElementById("root")),Et()},187:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(70),c=n(40),a=n(66),o=function(t){return new r.b(new c.Connection(Object(a.a)().solana.RPC),t,{})}},297:function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return u}));n(0),n(5);var r=n(70),c=n(854),a=(n(67),n(66)),o=n(40),i=(new r.e.PublicKey("cndyAnrLdpjq1Ssp1z8xxDsB8dxe7u4HL5Nxi2K5WXZ"),new r.e.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),new r.e.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(t.slice(0,e),"...").concat(t.slice(-e))}),u=function(t){return console.log(t),new c.MallocSdk(new o.PublicKey(Object(a.a)().MALLOC_PROGRAM_ID||""),t)}}).call(this,n(6).Buffer)},304:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var r=n(66),c=n(120),a=function(){var t=Object(c.b)("splitter",Object(r.a)().INITIAL_SPLITTER_ID_UUID);return{id:t,type:"splitter",position:{x:100,y:100},data:{isInitial:!0,id:t}}},o=function(){var t=Object(c.d)("swap"),e=Object(c.d)("splitter");return[{id:t,type:"swap",data:{id:t},position:{x:100,y:400}},{id:e,type:"splitter",data:{id:e},position:{x:100,y:460}},{id:Object(c.a)(t,e),source:t,target:e}]},i=function(){var t=Object(c.d)("transfer");return[{id:t,type:"transfer",data:{id:t},position:{x:100,y:400}}]}},37:function(t,e,n){"use strict";n.d(e,"i",(function(){return l})),n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return b})),n.d(e,"b",(function(){return j})),n.d(e,"g",(function(){return p})),n.d(e,"h",(function(){return O})),n.d(e,"d",(function(){return v})),n.d(e,"f",(function(){return m})),n.d(e,"e",(function(){return h}));var r=n(17),c=n(13),a=n(96),o=n(304),i=n(66),u=n(120),s=n(67),l=new a.Store({derivedTokenAccounts:null,tokenList:null}),d={};d[Object(u.b)("splitter",Object(i.a)().INITIAL_SPLITTER_ID_UUID)]={splitter:{splits:[],mint:void 0,tokenAccount:void 0}};var f=new a.Store(d),b=new a.Store({elements:[Object(o.c)()],actionData:[],initSplits:[],initAmount:new s.u64(0)}),j=new a.Store({storeUpdateLoading:!1,ephemeralRunLoading:!1}),p=function(t){return j.setState(Object(c.a)(Object(c.a)({},j.state),{},{ephemeralRunLoading:t}))},O=function(t){return j.setState(Object(c.a)(Object(c.a)({},j.state),{},{storeUpdateLoading:t}))},v=function(t){return b.setState({elements:[].concat(Object(r.a)(b.state.elements),Object(r.a)(t))})},m=function(t){return b.setState({elements:Object(r.a)(t)})},h=function(t,e){var n=Object(r.a)(b.state.elements);n[e]=t,b.setState(Object(c.a)(Object(c.a)({},b.state),{},{elements:n}))}},66:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){var t="devnet";return{MALLOC_PROGRAM_ID:"9i4MAnhYagLr1vEo5jdmLehRe8Sm5Lx8fHaQNJfbFCve",mallocSpl:{TRANSFER_PROGRAM_ID:"ETpyJNQLorJbAcrPQpM9bkYxYMakegBh93kqZ1KnTBjr",SWAP_PROGRAM_ID:"7T6seoCvCQeUeSTf2EAwX5SnyrZvX7BFUMHi74ZodBKH"},projectSerum:{DEX_PROGRAM_ID:"DESVgJVGajEgKGXhb6XmqDHGz3VjdgP7rEVESBgxmroY"},demo:{FAKE_USDC:"EAERAaa5NHid5BSt4pRAqB6fAiAp9srt45FPMobwVHX8",FAKE_USDC_GD:"BukLK1E7shYK5jubcLCDnbwYiCzvYGv1JSaWD6Rc6f4R",FAKE_TOKEN_A:"J3Xrfx2T1vYAKkNiYrogJnVx6cE59Yv5UuC4v9n7mVkd"},INITIAL_SPLITTER_ID_UUID:"initial",solana:{RPC:"https://explorer-api.devnet.solana.com",NETWORK:t}}}},865:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return O}));var r=n(0),c=n.n(r),a=n(5),o=n(18),i=n(1418),u=n(93),s=n(40),l=n(4),d=n(66),f=n(37),b=n(187),j=n(117),p=n(27),O=function(e){var n=Object(l.useState)(""),r=Object(o.a)(n,2),O=r[0],v=r[1],m=Object(u.useAnchorWallet)();Object(l.useEffect)((function(){null!==e.toggleNodeInfoSet&&h()}),[e.toggleNodeInfoSet]);var h=function(){var n=Object(a.a)(c.a.mark((function n(){var r,a;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(O){n.next=2;break}return n.abrupt("return");case 2:Object(f.h)(!0),n.prev=3,r=new s.PublicKey(O),n.next=12;break;case 7:return n.prev=7,n.t0=n.catch(3),alert("Invalid recipient account"),Object(f.h)(!1),n.abrupt("return");case 12:if(e.mint){n.next=15;break}return Object(f.h)(!1),n.abrupt("return");case 15:return n.next=17,Object(j.b)(r,e.mint);case 17:return a=n.sent,n.next=20,Object(b.a)(m).connection.getAccountInfo(a);case 20:if(n.sent){n.next=25;break}return alert("Looks like the user does not have an associated account with this mint!"),Object(f.h)(!1),n.abrupt("return");case 25:e.nodeInfoStoreState[e.id]={action:{actionData:t.from([]),actionProgram:new s.PublicKey(Object(d.a)().mallocSpl.TRANSFER_PROGRAM_ID),actionAccounts:[{address:a,isWriteable:!0}],signers:[],tokenMintOuts:[],tokenAccountsOuts:[]}},f.c.setState(e.nodeInfoStoreState),Object(f.h)(!1);case 28:case"end":return n.stop()}}),n,null,[[3,7]])})));return function(){return n.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h4",{children:"Transfer Action"}),Object(p.jsxs)("p",{children:["Input token: ",e.mintName]}),Object(p.jsx)(i.a,{value:O,label:"Recipient Address",onChange:function(t){return v(t.target.value)},onBlur:function(t){return h()}})]})}}).call(this,n(6).Buffer)},891:function(t,e,n){},892:function(t,e,n){},893:function(t,e){},895:function(t,e){},902:function(t,e){},917:function(t,e){},918:function(t,e){},957:function(t,e){},958:function(t,e){},959:function(t,e){},963:function(t,e){},980:function(t,e){},981:function(t,e){}},[[1404,1,2]]]);
//# sourceMappingURL=main.ba86e69b.chunk.js.map