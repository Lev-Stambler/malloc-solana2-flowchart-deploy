(this.webpackJsonpflowchart=this.webpackJsonpflowchart||[]).push([[0],{1004:function(t,e){},1006:function(t,e){},1011:function(t,e){},1013:function(t,e){},1020:function(t,e){},1032:function(t,e){},1035:function(t,e){},1047:function(t,e){},1049:function(t,e,n){"use strict";n.r(e);var c,o,i=n(0),r=n.n(i),s=n(47),a=n.n(s),u=(n(699),n(700),n(701),n(702),n(1)),l=n.n(u),d=n(8),b=n(22),j=n(16),f=n(68),p=n(427),h=n(112),v=n(323),x=n(252),O=n(55),g=n(38),m=n(66),y=n(4),S=function(){var t=Object(O.useStore)(g.c);return Object(y.jsxs)("div",{children:[Object(y.jsx)("select",{className:"form-select","aria-label":"Default select example",onChange:function(e){t.context.selectedActionType=parseInt(e.target.value),g.c.setState(Object(b.a)({},t))},children:Object.keys(m.splConstants.BUILD_ACTION_UIDS).map((function(t,e){return Object(y.jsx)("option",{value:e,children:t})}))}),Object(y.jsxs)("span",{className:"fine-print",children:["double click to create a new"," ",Object.keys(m.splConstants.BUILD_ACTION_UIDS)[t.context.selectedActionType]," ","action"]})]})},A=function(){var t=Object(O.useStore)(g.c),e=Object(O.useStore)(g.b),n=Object(h.useAnchorWallet)(),c=Object(i.useState)(!1),o=Object(j.a)(c,2),r=o[0],s=o[1],a=Object(i.useState)(!1),u=Object(j.a)(a,2),l=u[0],d=u[1],b=Object(i.useState)(!1),f=Object(j.a)(b,2),p=f[0],v=f[1],m=function(c,o){if(t.malloc&&n){var i=c?e.failedAction:void 0;!l||i?(console.log(i),Object(x.a)(t,n,o,i)):alert("You can only rerun from a failure if a previous failure has occurred")}else alert("Please connect your wallet before running a flow")};return Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(y.jsx)("div",{style:{display:"flex",justifyContent:"left",gap:"1rem"},children:Object(y.jsx)(S,{})}),Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"right",gap:"1rem"},children:[Object(y.jsx)("button",{className:"controls",onClick:function(){return Object(g.d)()},children:"Import"}),Object(y.jsx)("button",{className:"controls",onClick:function(){return Object(g.a)()},children:"Export"}),Object(y.jsx)("button",{className:"controls",onClick:function(){v(!0),Object(x.c)(t).finally((function(){return v(!1)}))},disabled:p,children:p?"Building...":"Build"}),Object(y.jsx)("button",{className:"controls",disabled:r,onClick:function(){return m(!1,s)},children:r?"Running...":"Build and Run"}),e.failedAction&&Object(y.jsx)("button",{className:"controls",disabled:r,onClick:function(){return m(!0,d)},children:l?"Rerunning...":"Rerun failed"})]})]})},w=n(5),M=new O.Store({derivedTokenAccounts:null,tokenList:null,raydium:{liquidityPools:null}}),k=function(){var t=Object(d.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(){var t=Object(d.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!M.state.raydium.liquidityPools){t.next=2;break}return t.abrupt("return",M.state.raydium.liquidityPools);case 2:return t.next=4,m.utils.raydium.getMainnetRaydiumPools();case 4:return e=t.sent,M.setState(Object(b.a)(Object(b.a)({},M.state),{},{raydium:Object(b.a)(Object(b.a)({},M.state.raydium),{},{liquidityPools:e})})),t.abrupt("return",e);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,e();case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=n(1114),C=n(1113),D=n(1102),T=n(1106),U=n(1122),P=n(432),L=n(78),N=["So11111111111111111111111111111111111111112","9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E","2FPyTwcZLUg1MDrwsyoP4D6s1tM7hAkHYRjkNb5w6Pxk","Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB","BQcdHdAQW1hczDbBi9hiegXAR7A98Q9jx3X3iBBBDiq4","EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","BXXkv6z8ykpG1yuvUDPgh732wzVHB69RnB9YgSYh3itW","3JSf5tPeuscJGtaCp5giEiDhv51gQ4v3zWg8DGgyLfAB","CWE8jPTUYhdCTZYWPTe1o5DFqfdjzWKc9WKz6rSjQUdG","Ga2AXHpfAF6mv2ekZwcsJFqu7wB4NV331qNH7fW9Nst8","AR1Mtgh7zAtxuxGd2XPovXPVjcSdY3i4rQYisNadjfKy","CsZ5LZkDS7h9TDKjrbL7VAwQZ9nsRu8vJLhRYfmGaN8K","SF3oTvfWzEP3DTwGSvUXRrGTvr75pdZNnBLAH9bzMuX","BtZQfWqDGbk9Wf2rXEiWyQBdBY1etnUUn6zEphvVS7yN","5Fu5UUgbjpUvdBveb3a1JTNirL8rXtiYeSMWvKjtUNQv","DEhAasscXF4kEGxFgJ3bq4PpVGp5wyUxMRvn6TzGVHaw","SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt","AGFEad2et2ZJif9jaGpdMixQqvW5i81aBdvKe7PHNfz3","MSRMcoVyrFxnSgo5uXwone5SKcGhT1KEJMFEkMEWf9L","GXMvfY2jpQctDqZ9RoU3oWPhufKiCcFEfchvYumtX7jd","EcqExpGNFBve2i1cMJUTR4bPXj4ZoqmDD2rTkeCcaTFX","EqWCKXfs3x47uVosDpTRgFniThL9Y8iCztJaapxbEaVX","GeDS162t9yGJuLEHPWXXGrb1zwkzinCgRwnT8vHYjKza","GUohe4DJUA5FKPWo3joiPgsB7yzer7LpDmt1Vhzy3Zht","9F9fNTT6qwjsu4X4yWYKZpsbw5qT7o6yR2i57JF2jagy","EchesyfXePKdLtoiZSL8pBe8Myagyy8ZRqsACNCFGnvp","kinXdEcpDQeHPEuQnqmUgtYykqKGVFq6CeVX5iAHJq6","MAPS41MDahZ9QdKXhVa4dWB9RuyfV4XqhyAZ8XcYepb","z3dn17yLaGMKffVogeFHQ9zWVcXgqgf3PQnDsNs2g6M","4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R","3K6rftdAaQYMPunrtNRHgnK2UAtjm2JwyT2oCiTDouYE","8HGyAAB1yoM1ttS7pXjHMa3dukTFGQggnFFH3hJZgzQh","StepAscQoEioFxxWGnh2sLBDFp9d8rvKz2Yp39iDpyT","ETAtLmCmsoiEEKfNrHKJ2kYy3MoABhU6NQvpSfij5tDs","8PMHT4swUMtBzgHnh5U564N5sjPSiUz2cjEQzFnnP1Fo","MERt85fc5boKw3BW1eYdxonEuJNvXbiMbs6hvheau5K","TuLipcqtGVXP9XR62wM8WWCm6a9vhLs7T1uoWBk6FDs","4dmKkXNHdgYsXqBHCuMikNQWwVomZURhYvkkX5c4pQ7y","SLRSSpSLUTP7okbCUBYStWCo1vUgyt775faPqz8HUMr","E5rk3nmgLUuKUiS94gg4bpWwWwyjCMtddsAXkTFLtHEy","BLwTnYKqf7u4qjgZrrsKeNs2EzWkMLqVCu6j8iHyrNA3","7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU","CDJWUqTcYTVAKXAVXoQZFes5JUFc7owSeq7eMQcDSbo5","ArUkYE2XDKzqy77PRRGjo4wREWwqk6RXTfM9NeqzPvjU","3bRTivrVsitbmCTGtqwp7hxXPsybkjn4XLNtPsHqa3zR","GsNzxJfFn6zQdJGeYsupJWzUAm57Ba7335mfhWvFiE9Z","mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So","Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS","PoRTjZMPXb9T7dyU7tpLEZRQj7e6ssfAE62j2oQuc6y","MangoCzJ36AjZyKwVj3VnYU4GTonjfVEnJmvvWaxLac","DubwWZNWiNGMMeeQHPnMATNj77YZPZSAz2WVR5WjLJqz","ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx","poLisWXnNRwC6oBu1vHiuKQzFjGL4XDSu4g9qjz9qVk","8upjSpvjcdpuzhfR1zriwg5NXkwDruejqNE9WNbPRtyA","3FoUAsGDbvTD6YZ4wVKJgTB76onJUKz7GPEBNiR5b8wc","7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj","Lrxqnh6ZHKbGy3dcrCED43nsoLkM1LTzU2jRfWe8qUC","E5ndSkaB17Dm7CsD22dvcjfrYSDLCxFcMd6z8ddCk5wp","51tMb3zBKDiQhNwGqpgwbavaGH54mk8fXFzxTc1xnasg","MNDEFzGvMt87ueuHvVU9VcTqsAP5b3fTGPsHuuPA5ey","4wjPQJ6PrkC4dHhYghwJzGBVP78DkBzA2U3kHoFNBuhj","5tN42n9vMi6ubp67Uy4NnmM5DMZYN8aS8GeB3bEDHr6E","HZRCwxP2Vq9PCpPXooayhJ2bxTpo5xfpQrwB1svh332p","xxxxa1sKNGwFtw2kFn8XauW9xq8hBZ5kVtcSesTT9fW","PRT88RkA4Kg5z7pKnezeNH4mafTvtQdfFgpQTGRjz44","Saber2gLauYim4Mvftnrasomsv6NvAuncvMEZwcLpD1","EdAhkbj5nF9sRM7XN7ewuW8C9XEUMs8P7cnoQ57SYE96","a11bdAAuV8iB2fu7X6AxAvDTo1QZ8FXB3kk5eecdasp","iVNcrNE9BRZBC9Aqf753iZiZfbszeAVUoikgT9yvr2a","BRLsMczKuaR5w9vSubF4j8HwEGGprVAyyVgS4EX7DKEg","ErGB9xa24Szxbk1M28u2Tx8rKPqzL6BroNkkzk5rG4zj","AURYydfxJib1ZkTir1Jn1J9ECYUtjb6rKQVmtYaixWPP","FnKE9n6aGjQoNWRBZXy4RW6LZVao7qwBonUbiD7edUmZ","9nEqaUcb16sQ3Tn1psbkWqyhPdLmfHWjKGymREjsAgTE","orcaEKTdK7LKz57vaAYr9QeNsVEPfiu6QeMU1kektZE","SLNDpmoWTVADgEdndyvWzroNL7zSi1dF9PC3xHGtPwp","7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs","8FU95xFJhUUkyyCLU13HSzDLs7oC4QZdXQHL6SCeab36","ChVzxWRmrTeSgwd3Ui3UumcN8KX7VK3WaD4KGeSKpypj","GFX1ZjR2P15tmrSwow6FjyDYcEkoFb4p4gJCpLBjaxHD","inL8PMVd6iiW3RCBJnr5AsrRN6nqr4BTrcNuQWQSkvY","4Hx6Bj56eGyw8EJrrheM6LBQAvVYRikYCWsALeTrwyRU","HCgybxq5Upy8Mccihrp7EsmwwFqYZtrHrsmsKwtGXLgW","HysWcbHiYY9888pHbaqhwLYZQeZrcQMXKQWRqS7zcPK5","CiKu4eHsVrc1eueVQeHn7qhXTcVu95gSQmBpX4utjL9z"],R=function(){var t=Object(d.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(){var t=Object(d.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!M.state.tokenList){t.next=2;break}return t.abrupt("return",M.state.tokenList);case 2:return t.next=4,(new P.b).resolve(P.a.Solana);case 4:return e=t.sent,n=e.filterByClusterSlug(Object(L.b)().solana.NETWORK).getList(),M.setState(Object(b.a)(Object(b.a)({},M.state),{},{tokenList:n})),t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,e();case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=function(){var t=Object(d.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R();case 2:return n=t.sent,t.abrupt("return",n.find((function(t){return t.address===e.toString()})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=n(89),B=n(43),W=n.n(B),X=function(t){var e=t.tok,n=t.mint,c=Object(i.useState)(null),o=Object(j.a)(c,2),r=o[0],s=o[1];return Object(i.useEffect)((function(){n&&I(n).then((function(t){s(t||{chainId:0,address:n.toString(),name:"Unkown token",decimals:6,symbol:"UNKOWN"})}))}),[n]),Object(i.useEffect)((function(){e&&s(e)}),[e]),r?Object(y.jsxs)("div",{style:{cursor:"pointer"},onClick:function(){t.onClick&&t.onClick(r)},children:[r.logoURI&&Object(y.jsx)("img",{src:r.logoURI,style:{height:"14px"}})," ",t.amount?F.utils.tokens.toReadableNumber(new W.a(t.amount),r.decimals):""," ",r.symbol]}):Object(y.jsx)("div",{children:"Loading..."})},K=Object(D.a)(U.a)(c||(c=Object(f.a)(["\n  position: fixed;\n  z-index: 1300;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Y=Object(D.a)("div")(o||(o=Object(f.a)(["\n  z-index: -1;\n  position: fixed;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-tap-highlight-color: transparent;\n"]))),H={width:400,bgcolor:"background.paper",border:"2px solid #000",p:2,px:4,pb:3};function z(t){var e,n=i.useState(!1),c=Object(j.a)(n,2),o=c[0],r=c[1];return Object(y.jsxs)("div",{children:[Object(y.jsx)("button",{type:"button",className:"controls2",onClick:function(){return r(!0)},children:null!==(e=t.buttonText)&&void 0!==e?e:"Choose Token"}),Object(y.jsx)(K,{"aria-labelledby":"unstyled-modal-title","aria-describedby":"unstyled-modal-description",open:o,onClose:function(){return r(!1)},BackdropComponent:Y,children:Object(y.jsxs)(T.a,{sx:H,children:[Object(y.jsx)("h2",{id:"unstyled-modal-title",children:"Select Mint"}),Object(y.jsx)("div",{children:Object(y.jsx)(q,{includedMints:t.includedMints,onSelect:t.onSelect})})]})})]})}var G,q=function(t){var e=t.onSelect,n=i.useState(""),c=Object(j.a)(n,2),o=c[0],r=c[1],s=i.useState(null),a=Object(j.a)(s,2),u=a[0],l=a[1],d=i.useState(null),f=Object(j.a)(d,2),p=f[0],h=f[1];return i.useEffect((function(){u&&e&&e(null===u||void 0===u?void 0:u.token)}),[u]),i.useMemo((function(){console.log("GO"),R().then((function(e){var n=function(e){var n,c=null!==(n=t.includedMints)&&void 0!==n?n:N;return e.filter((function(t){return c.includes(t.address)})).map((function(t){return{label:t.symbol,token:t}}))}(e);h(n)}))}),[]),Object(y.jsx)("div",{children:p?Object(y.jsx)(C.a,{value:u,inputValue:o,onChange:function(t,e){l(e)},onInputChange:function(t,e){r(e)},id:"combo-box-demo",getOptionLabel:function(t){return t.label},isOptionEqualToValue:function(t,e){return t.label===e.label},options:p,sx:{width:300,backgroundColor:"white"},renderOption:function(t,e){return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(X,{tok:e.token,onClick:function(t){l({label:t.symbol,token:t})}})})},renderInput:function(t){return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(E.a,Object(b.a)(Object(b.a)({},t),{},{label:"Mint"}))})}}):Object(y.jsx)("div",{children:"loading..."})})},_=function(t){var e=Object(i.useState)(void 0),n=Object(j.a)(e,2),c=n[0],o=n[1],r=function(){var t=Object(d.a)(l.a.mark((function t(e){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k();case 2:return n=t.sent,c=new w.PublicKey(e),t.abrupt("return",n.filter((function(t){return t.baseMint.equals(c)||t.quoteMint.equals(c)})).map((function(t){return t.baseMint.equals(c)?t.quoteMint.toBase58():t.baseMint.toBase58()})));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){console.log("HEREH"),t.inputMint&&r(t.inputMint).then((function(t){return o(t)}))}),[t.inputMint]),Object(y.jsxs)(y.Fragment,{children:["Out Mint:"," ",t.input.outMint?Object(y.jsx)(X,{mint:t.input.outMint}):Object(y.jsx)(y.Fragment,{children:"Unset"}),Object(y.jsx)(z,{buttonText:"Choose mint",includedMints:c,onSelect:function(e){console.log("AAAA"),t.updateInput({outMint:e.address})}})]})},V=n(69),Q=function(t){var e=Object(i.useState)(!1),n=Object(j.a)(e,2),c=n[0],o=n[1],r=Object(i.useState)(null),s=Object(j.a)(r,2),a=s[0],u=s[1];return Object(i.useEffect)((function(){var e;(null===(e=t.input)||void 0===e?void 0:e.recipientWallet)&&u(t.input.recipientWallet)}),[t.input]),Object(y.jsxs)(y.Fragment,{children:["Recipient Address:"," ",Object(y.jsx)(E.a,{error:c,style:{backgroundColor:V.b},InputProps:{style:{color:V.e}},label:c?"Please enter a valid wallet address":"",value:a,onChange:function(t){return u(t.target.value)},onBlur:function(e){try{new w.PublicKey(e.target.value),t.updateInput({recipientWallet:e.target.value}),o(!1)}catch(n){o(!0)}}})]})},J=n(20),Z=n(1112),$=n(1109),tt=n(1125);function et(t){var e,n=i.useState(0),c=Object(j.a)(n,2),o=(c[0],c[1]);return i.useEffect((function(){var t=setInterval((function(){o((function(t){if(100===t)return 0;var e=10*Math.random();return Math.min(t+e,100)}))}),500);return function(){clearInterval(t)}}),[]),Object(y.jsx)(Z.a,{sx:{width:"100%"},children:Object(y.jsx)(tt.a,{variant:"determinate",value:(e=t,100*(e.value-e.min)/(e.max-e.min))})})}var nt,ct,ot=Object(J.a)($.a)(G||(G=Object(f.a)(["\n  width: 100px;\n"]))),it=function(t){var e=Object(O.useStore)(g.c),n=e.context.nodes[e.context.selectedNodeId].outEdges[t.outEdgeId],c=r.a.useState(t.nextActions[t.outEdgeId]),o=Object(j.a)(c,2),i=o[0],s=o[1];return Object(y.jsx)(Z.a,{sx:{width:400},onMouseOver:function(){n.highlighted=!0},onMouseOut:function(){n.highlighted=!1},children:Object(y.jsxs)("div",{style:{display:"grid",gap:"1rem",alignItems:"center",gridTemplateColumns:"120px 1fr 1fr 30px"},children:[Object(y.jsx)("h6",{children:t.outEdgeId}),Object(y.jsx)(ot,{value:i,size:"small",onChange:function(e){var n=""===e.target.value?0:Number(e.target.value);s(n),t.nextActions[t.outEdgeId]=n,t.updateNextActions(t.nextActions)},onBlur:function(){i<0&&s(0)},style:{color:"#ffffff"},inputProps:{step:10,min:0,type:"number","aria-labelledby":"input-slider"}}),Object(y.jsx)(et,{value:Number(i)/rt(t.nextActions),min:0,max:1}),Object(y.jsx)("button",{className:"delete",onClick:function(t){var c=n.node1,o=n.node2,i=e.context.selectedOutMintIndex;delete e.context.nodes[c.id].outEdges[o.id],c.isSource?delete e.construction.source.nextActions[o.id]:delete e.construction.actionDatas[c.id].action.nextActions[i][o.id],g.c.setState(Object(b.a)({},e))},children:"x"})]})})},rt=function(t){return Object.keys(t).reduce((function(e,n){return e+t[n]}),0)},st=function(t){return Object(y.jsx)("div",{children:Object.keys(t.nextActions).map((function(e){return Object(y.jsx)(it,{outEdgeId:e,nextActions:t.nextActions,updateNextActions:t.updateNextActions})}))})},at=function(t){var e=Object(i.useState)(void 0),n=Object(j.a)(e,2),c=n[0];n[1];return Object(y.jsxs)(y.Fragment,{children:[void 0!==t.inputMints&&0!==Object.keys(t.inputMints).length?Object.keys(t.inputMints).map((function(e){return Object(y.jsxs)("div",{style:{display:"grid",gap:"1rem",alignItems:"center",gridTemplateColumns:"150px 1fr 30px"},children:[Object(y.jsx)(X,{mint:e,amount:t.inputMints[e].toString()}),Object(y.jsx)(ot,{value:t.inputMints[e].toString(),size:"small",onChange:function(n){t.inputMints[e]=""===n.target.value?"0":n.target.value,t.updateSource(t.inputMints)},style:{color:V.e}}),Object.keys(t.inputMints).length>1&&Object(y.jsx)("button",{className:"controls2",onClick:function(){delete t.inputMints[e],t.updateSource(t.inputMints)},children:"x"})]})})):Object(y.jsx)(y.Fragment,{children:"Unset"}),Object(y.jsx)("br",{}),Object(y.jsx)(z,{buttonText:"add mint",includedMints:c,onSelect:function(e){console.log("AAAA",e);t.inputMints[e.address]="100",t.updateSource(t.inputMints)}}),Object(y.jsx)("br",{})]})},ut=n(1126),lt=n(1121),dt=n(1115),bt=function(t){var e,n;return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(ut.a,{children:Object(y.jsx)(lt.a,{control:Object(y.jsx)(dt.a,{defaultChecked:null!==(e=null===(n=t.input)||void 0===n?void 0:n.hasFarm)&&void 0!==e&&e,onChange:function(e){t.updateInput({hasFarm:e.target.checked})}}),label:"Ensure that a farm exists"})})})},jt=function(t,e,n,c,o,i){var r;switch(t){case L.a:return Object(y.jsx)(at,{updateSource:n,inputMints:o});case m.splConstants.BUILD_ACTION_UIDS.TRANSFER:return Object(y.jsx)(Q,{updateInput:e,input:c});case m.splConstants.BUILD_ACTION_UIDS.RAYDIUM_LP_STAKE:return null;case m.splConstants.BUILD_ACTION_UIDS.RAYDIUM_LP_DEPOSIT:return Object(y.jsx)(bt,{updateInput:e,input:c});case m.splConstants.BUILD_ACTION_UIDS.RAYDIUM_SWAP:return Object(y.jsx)(_,{updateInput:e,input:c,inputMint:null===i||void 0===i||null===(r=i.inMints)||void 0===r?void 0:r[0]});case m.splConstants.BUILD_ACTION_UIDS.SOLEND_LP_DEPOSIT:default:return null}},ft=function(){var t,e,n,c,o=Object(O.useStore)(g.c),i=o.context.nodes[o.context.selectedNodeId],r=i.isSource;r?(e=L.a,n=null,c=o.construction.source.nextActions):(e=(t=o.construction.actionDatas[i.id].action).actionTypeUID,n=t.inputs,c=t.nextActions,m.MallocSPLBuildActionMap[e].expectedNumberOutMints);var s=function(t){o.construction.source.mints=t,g.c.setState(Object(b.a)({},o))},a=function(t){o.construction.actionDatas[i.id].action.inputs=t,g.c.setState(Object(b.a)({},o))},u=r?jt(e,a,s,n,o.construction.source.mints):jt(e,a,s,n,o.construction.source.mints,t),l=function(t){i.isSource?o.construction.source.nextActions=t:o.construction.actionDatas[i.id].action.nextActions[o.context.selectedOutMintIndex]=t,g.c.setState(Object(b.a)({},o))},d=function(){return i.isSource?o.construction.source.nextActions:o.construction.actionDatas[i.id].action.nextActions[o.context.selectedOutMintIndex]};return Object(y.jsxs)("div",{className:"card",children:[Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(y.jsx)("input",{value:i.id,type:"text",className:"inputField",style:{width:"90%"},onChange:function(t){}}),!i.isSource&&Object(y.jsx)("button",{className:"delete",onClick:function(){for(var t=0,e=Object.keys(o.context.nodes);t<e.length;t++){var n=e[t];if(n!=i.id){var c=o.context.nodes[n];c.outEdges[i.id]&&(delete c.outEdges[i.id],c.isSource?delete o.construction.source.nextActions[i.id]:delete o.construction.actionDatas[n].action.nextActions[i.id])}}delete o.context.nodes[o.context.selectedNodeId],delete o.construction.actionDatas[o.context.selectedNodeId],o.context.selectedNodeId="SOURCE",g.c.setState(Object(b.a)({},o))},children:"x"})]}),Object(y.jsx)(T.a,{sx:{m:2},children:Object(y.jsx)("h5",{children:"Input"})}),u&&u,Object(y.jsx)("div",{children:(r||c&&c.length>=1)&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h5",{children:"Next Actions"}),r&&Object(y.jsx)(st,{updateNextActions:l,nextActions:d()}),!r&&c.map((function(t,e){return Object(y.jsx)(st,{updateNextActions:l,nextActions:d()})}))]})})]})},pt=n(163),ht=function(t){var e=t.mints,n=t.amounts;return Object(y.jsx)(y.Fragment,{children:e.map((function(t,e){return Object(y.jsx)(X,{mint:t,amount:n[e]},"Estimate-line-".concat(e,"-").concat(t.toString()))}))})},vt=function(t){return void 0!==t},xt=function(){var t=Object(O.useStore)(g.c),e=t.context.nodes[t.context.selectedNodeId],n=t.construction.actionDatas[e.id].action;return Object(y.jsxs)("div",{className:"card",style:{},children:[Object(y.jsx)("h3",{children:"Estimates"}),Object(y.jsxs)("div",{children:[Object(y.jsx)("h4",{children:"Expected In"}),vt(n.inEstimates)||Object(y.jsx)("p",{children:"We can only give estimates once the entire flow can be built!"}),vt(n.inEstimates)&&Object(y.jsx)(ht,{mints:n.inEstimates.map((function(t){return t.mint})),amounts:n.inEstimates.map((function(t){return t.amount}))})]}),Object(y.jsxs)("div",{children:[vt(n.outEstimates)||Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h4",{children:"Expected Out"}),Object(y.jsx)("p",{children:"We can only give estimates once the entire flow can be built!"})]}),vt(n.outEstimates)&&n.outEstimates.length>0&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h4",{children:"Expected Out"}),Object(y.jsx)(ht,{mints:n.outEstimates.map((function(t){return t.mint})),amounts:n.outEstimates.map((function(t){return t.amount}))})]})]})]})},Ot=function(){var t=Object(O.useStore)(g.c),e=t.context.nodes[t.context.selectedNodeId].isSource;return Object(y.jsx)("div",{children:Object(y.jsxs)("div",{style:{display:"grid",padding:"2rem",gap:"2rem",gridTemplateColumns:"1fr 2fr"},children:[Object(y.jsxs)("div",{style:{display:"grid"},children:[Object(y.jsx)(ft,{}),e||Object(y.jsx)(xt,{})]}),Object(y.jsxs)("div",{id:"graph-container",style:{display:"grid",gap:"1rem",alignItems:"flex-start"},children:[Object(y.jsx)(A,{}),Object(y.jsx)(pt.a,{}),Object(y.jsx)("span",{className:"fine-print",children:"Create nodes and edges in the canvas. Delete nodes and edges in the editor panel"}),t.loading&&Object(y.jsxs)("div",{children:[Object(y.jsx)("h4",{children:"Running your flow..."}),Object(y.jsx)(et,{value:t.loading.progress,max:t.loading.max,min:0})]})]})]})})},gt=n(96),mt=function(t){return new gt.Provider(new w.Connection(Object(L.b)().solana.RPC),t,{})},yt=n(1119),St=n(1116),At=Object(p.a)(v.WalletDialogButton)(nt||(nt=Object(f.a)([""]))),wt=(p.a.span(ct||(ct=Object(f.a)([""]))),function(t){var e,n=Object(i.useState)(),c=Object(j.a)(n,2),o=c[0],r=c[1],s=Object(i.useState)(!1),a=Object(j.a)(s,2),u=(a[0],a[1],Object(i.useState)(!1)),f=Object(j.a)(u,2),p=(f[0],f[1],Object(i.useState)(!1)),v=Object(j.a)(p,2),m=(v[0],v[1],Object(i.useState)({open:!1,message:"",severity:void 0})),S=Object(j.a)(m,2),A=S[0],w=S[1],M=Object(h.useWallet)(),k=Object(h.useAnchorWallet)(),E=Object(O.useStore)(g.c),C=function(){k&&g.c.setState(Object(b.a)(Object(b.a)({},E),{},{malloc:new F.MallocSdk(F.constants.PIDS.mainnet.MALLOC,mt(k),"mainnet-beta")}))};return Object(i.useEffect)((function(){C()}),[]),Object(i.useEffect)((function(){Object(d.a)(l.a.mark((function e(){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===k||void 0===k?void 0:k.publicKey)){e.next=7;break}return e.next=3,t.connection.getBalance(k.publicKey);case 3:n=e.sent,c=F.utils.tokens.toReadableNumber(new gt.BN(n),9),r(parseFloat(c).toFixed(4)),C();case 7:case"end":return e.stop()}}),e)})))()}),[M.publicKey]),Object(y.jsxs)("main",{children:[Object(y.jsxs)("div",{className:"header",children:[Object(y.jsx)("div",{style:{display:"flex",justifyContent:"left",gap:"1rem"},children:Object(y.jsx)("h1",{children:"malloc"})}),Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"right",gap:"1rem"},children:[M.connected&&Object(y.jsx)("div",{children:Object(y.jsxs)("p",{style:{marginTop:0},children:["Address: ",Object(x.b)((null===(e=M.publicKey)||void 0===e?void 0:e.toBase58())||"")," ",Object(y.jsx)("br",{}),"Balance: ",(o||0).toLocaleString()," SOL"]})}),!M.connected&&Object(y.jsx)(At,{children:"Connect Wallet"}),Object(y.jsx)("a",{href:"https://github.com/Lev-Stambler/malloc-solana2",target:"_blank",children:Object(y.jsx)("i",{className:"bi bi-github"})}),Object(y.jsx)("a",{href:"https://twitter.com/MallocProtocol",target:"_blank",children:Object(y.jsx)("i",{className:"bi bi-twitter"})}),Object(y.jsx)("a",{href:"mailto:mallocprotocol@gmail.com",target:"_blank",children:Object(y.jsx)("i",{className:"bi bi-mailbox"})})]})]}),Object(y.jsx)(yt.a,{open:A.open,autoHideDuration:6e3,onClose:function(){return w(Object(b.a)(Object(b.a)({},A),{},{open:!1}))},children:Object(y.jsx)(St.a,{onClose:function(){return w(Object(b.a)(Object(b.a)({},A),{},{open:!1}))},severity:A.severity,children:A.message})}),M.connected&&Object(y.jsx)(Ot,{})]})}),Mt=n(342),kt=n(1123),Et=n(669),Ct=n.n(Et);function Dt(){Object(O.useStore)(g.c);var t=Object(O.useStore)(g.b),e=i.useState(!0),n=Object(j.a)(e,2),c=n[0],o=n[1];i.useEffect((function(){o(!0)}),[t.changeToggle]);var r=function(t,e){"clickaway"!==e&&o(!1)},s=Object(y.jsx)(i.Fragment,{children:Object(y.jsx)(kt.a,{size:"small","aria-label":"close",color:"inherit",onClick:r,children:Object(y.jsx)(Ct.a,{fontSize:"small"})})});return t.message?Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(yt.a,{open:c,autoHideDuration:6e3,onClose:r,message:t.message||"",action:s})}):Object(y.jsx)(y.Fragment,{})}Object(L.b)().solana.NETWORK;var Tt=Object(L.b)().solana.RPC,Ut=new gt.web3.Connection(Tt),Pt=function(){var t=Object(O.useStore)(g.c),e=Object(i.useMemo)((function(){return Object(w.clusterApiUrl)("mainnet-beta")}),[]),n=Object(i.useMemo)((function(){return[Object(Mt.getPhantomWallet)(),Object(Mt.getSolflareWallet)(),Object(Mt.getSolletWallet)()]}),[]);return Object(i.useEffect)((function(){Object(pt.b)(t)}),[]),Object(y.jsx)(h.ConnectionProvider,{endpoint:e,children:Object(y.jsx)(h.WalletProvider,{wallets:n,autoConnect:!0,children:Object(y.jsxs)(v.WalletDialogProvider,{children:[Object(y.jsx)(wt,{connection:Ut,txTimeout:3e4}),Object(y.jsx)(Dt,{})]})})})},Lt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,1128)).then((function(e){var n=e.getCLS,c=e.getFID,o=e.getFCP,i=e.getLCP,r=e.getTTFB;n(t),c(t),o(t),i(t),r(t)}))};a.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(Pt,{})}),document.getElementById("root")),Lt()},129:function(t,e,n){"use strict";n.d(e,"b",(function(){return b})),n.d(e,"a",(function(){return j})),n.d(e,"c",(function(){return f}));var c=n(11),o=n(13),i=n(78),r=n(69),s=function(t,e){return[t[0]+e[0],t[1]+e[1]]},a=function(t,e){return[t[0]-e[0],t[1]-e[1]]},u=function(t,e){return[t[0]*e,t[1]*e]},l=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},d=function(t,e,n,c){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-c,2))},b=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(c.a)(this,t),this.pos=void 0,this.vel=void 0,this.acc=void 0,this.actionType=void 0,this.r=void 0,this.r2=void 0,this.r3=void 0,this.hover=void 0,this.hover2=void 0,this.id=void 0,this.selected=void 0,this.successfullyRan=void 0,this.failedRunning=void 0,this.isSource=void 0,this.outEdges=void 0,this.pos=n,this.vel=[0,0],this.acc=[0,0],this.r=15,this.r2=2*this.r,this.r3=4*this.r,this.hover=!1,this.hover2=!1,this.actionType=r,this.id=e,this.selected=i,this.isSource=o,this.failedRunning=!1,this.successfullyRan=!1,this.outEdges={}}return Object(o.a)(t,[{key:"updateHover",value:function(t,e){this.hover=d(t,e,this.pos[0],this.pos[1])<this.r,this.hover2=d(t,e,this.pos[0],this.pos[1])<this.r2}},{key:"repel",value:function(t){var e=a(this.pos,t.pos),n=l(e);if(e=u(e,1/n),n<this.r3){var c=-1/(n*n);t.acc=s(t.acc,u(e,c))}else t.acc=[0,0]}},{key:"draw",value:function(t){t.noStroke(),t.fill(r.e),t.circle(this.pos[0],this.pos[1],2*this.r),this.selected&&(t.stroke(r.c),t.strokeWeight(3),t.noFill(),t.circle(this.pos[0],this.pos[1],2*this.r*1.5)),this.failedRunning?t.fill(r.g):this.successfullyRan?t.fill(r.c):this.isSource?t.fill(r.a):t.fill(r.f),t.noStroke(),t.circle(this.pos[0],this.pos[1],2*this.r*.7),this.hover?(t.fill(r.e),t.textSize(15),t.text(this.id,this.pos[0]-t.textWidth(this.id)/2,this.pos[1]-30)):this.hover2&&(t.noStroke(),t.fill(r.d),t.circle(this.pos[0],this.pos[1],2*this.r2)),t.mouseIsPressed||(this.pos=s(this.pos,this.vel),this.vel=s(this.vel,this.acc))}}]),t}(),j=function(){function t(e,n){Object(c.a)(this,t),this.node1=void 0,this.node2=void 0,this.highlighted=void 0,this.weight=void 0,this.arrowSize=void 0,this.node1=e,this.node2=n,this.weight=5,this.highlighted=!1,this.arrowSize=10}return Object(o.a)(t,[{key:"drawArrow",value:function(t){var e,n=this.node1.pos,c=a(this.node2.pos,n);t.push(),t.translate(n[0],n[1]),t.line(0,0,c[0],c[1]),t.rotate((e=c,Math.atan2(e[1],e[0])));var o=this.arrowSize;t.translate(l(c)-o-this.node2.r,0),t.triangle(0,o/2,0,-o/2,o,0),t.pop()}},{key:"draw",value:function(t){t.strokeWeight(this.weight),t.stroke(r.f),t.fill(r.f),this.drawArrow(t),this.highlighted&&(t.stroke(r.d),t.strokeWeight(5*this.weight),t.line(this.node1.pos[0],this.node1.pos[1],this.node2.pos[0],this.node2.pos[1]))}}]),t}(),f={initialized:!1,scale:1,translate:[0,0],selectedOutMintIndex:0,selectedActionType:0,selectedNodeId:i.a,activeEdge:null,nodes:{SOURCE:new b(i.a,[0,0],!0)}}},163:function(t,e,n){"use strict";n.d(e,"c",(function(){return v})),n.d(e,"b",(function(){return x}));var c=n(21),o=n(22),i=n(27),r=n(16),s=(n(0),n(663)),a=n.n(s),u=n(129),l=n(55),d=n(38),b=n(66),j=n(78),f=n(69),p=n(4),h=function(t,e,n,c){return console.log("called!"),[Math.round(Math.random()*(n-t)+t),Math.round(Math.random()*(c-e)+e)]},v=function(t){for(var e=t.context.nodes,n={nodes:{},translate:t.context.translate,scale:t.context.scale},c=0,o=Object.entries(e);c<o.length;c++){var i=Object(r.a)(o[c],2),s=i[0],a=i[1];n.nodes[s]=a.pos}return n},x=function(t,e){var n=t.construction.source.nextActions,c=t.construction.actionDatas,s=t.context.nodes,a=s[j.a];a.selected=!0;for(var l=0,b=Object.entries(n);l<b.length;l++){var f=Object(r.a)(b[l],2),p=f[0],v=(f[1],h(-100,-100,100,100)),x=new u.b(p,v);s[p]=x;var O=new u.a(a,x);a.outEdges[p]=O}for(var g=0,m=Object.keys(c);g<m.length;g++){var y=m[g];if(!s[y]){var S=h(-100,-100,100,100);s[y]=new u.b(y,S)}}for(var A=0,w=Object.keys(c);A<w.length;A++){var M,k=w[A],E=s[k],C=Object(i.a)(c[k].action.nextActions);try{for(C.s();!(M=C.n()).done;)for(var D=M.value,T=0,U=Object.keys(D);T<U.length;T++){var P=U[T],L=s[P],N=new u.a(E,L);E.outEdges[P]=N}}catch(X){C.e(X)}finally{C.f()}}if(e){t.context.translate=e.translate,t.context.scale=e.scale;for(var R=0,I=Object.entries(e.nodes);R<I.length;R++){var F=Object(r.a)(I[R],2),B=F[0],W=F[1];t.context.nodes[B].pos=W}}d.c.setState(Object(o.a)({},t))};function O(t,e){t.nodes[t.selectedNodeId].selected=!1,t.selectedNodeId=e,t.nodes[t.selectedNodeId].selected=!0}e.a=function(){var t,e,n=Object(l.useStore)(d.c),i=n.context,s=!1,h=!1,v=function(t,e){return[t/i.scale-i.translate[0],e/i.scale-i.translate[1]]};return Object(p.jsx)(a.a,{setup:function(c,a){var l=function(t,e){if(!e[t])for(var n=e.length;n<=t;n++)e.push({});return e},f=document.getElementById("graph-container");c.createCanvas(null===f||void 0===f?void 0:f.clientWidth,500).parent(a).mouseClicked((function(t){for(var e=0,c=Object.entries(i.nodes);e<c.length;e++){var s=Object(r.a)(c[e],2),a=s[0];s[1].hover&&O(i,a)}d.c.setState(Object(o.a)({},n))})).doubleClicked((function(t){var e=Object.values(b.splConstants.BUILD_ACTION_UIDS)[i.selectedActionType],r=Object.keys(b.splConstants.BUILD_ACTION_UIDS)[i.selectedActionType]+"-"+function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*c));return e}(5);i.nodes[r]=new u.b(r,v(c.mouseX,c.mouseY)),O(i,r);var s={actionTypeUID:e,actionPID:b.splConstants.PIDS.MAINNET.CPI_ACTION,inputs:{},nextActions:[]};n.construction.actionDatas[r]={action:s},d.c.setState(Object(o.a)({},n))})).mousePressed((function(n){for(var o=0,a=Object.entries(i.nodes);o<a.length;o++){var l=Object(r.a)(a[o],2),d=(l[0],l[1]);if(d.hover)return s=!0,void(t=d);if(d.hover2)return h=!0,t=d,(e=new u.b("temp",v(c.mouseX,c.mouseY))).r=0,void(i.activeEdge=new u.a(t,e))}})).mouseReleased((function(e){if(s&&(s=!1),h){for(var c=0,a=Object.entries(i.nodes);c<a.length;c++){var b=Object(r.a)(a[c],2),f=(b[0],b[1]);if(f.hover2&&f!=t){var p=new u.a(t,f);if(t.outEdges[f.id]=p,t.id===j.a)n.construction.source.nextActions[f.id]=100;else{var v=n.construction.actionDatas[t.id],x=i.selectedOutMintIndex;l(x,v.action.nextActions)[x][f.id]=100}d.c.setState(Object(o.a)({},n))}}h=!1,i.activeEdge=null}})).mouseMoved((function(n){s&&(t.pos=v(c.mouseX,c.mouseY)),h&&(e.pos=v(c.mouseX,c.mouseY));for(var o=v(c.mouseX,c.mouseY),a=Object(r.a)(o,2),u=a[0],l=a[1],d=0,b=Object.entries(i.nodes);d<b.length;d++){var j=Object(r.a)(b[d],2);j[0];j[1].updateHover(u,l)}})).mouseWheel((function(t){i.translate[0]-=t.deltaX,i.translate[1]-=t.deltaY})),i.translate=[c.width/2,c.height/2]},draw:function(t){t.background(f.a),t.noStroke(),t.fill(f.b);t.rect(0,0,t.width,t.height,20,20,20,20),t.push(),t.translate(t.createVector.apply(t,Object(c.a)(i.translate))),t.scale(i.scale),null!=i.activeEdge&&i.activeEdge.draw(t);for(var e=0,n=Object.entries(i.nodes);e<n.length;e++)for(var o=Object(r.a)(n[e],2),s=(o[0],o[1]),a=0,u=Object.entries(s.outEdges);a<u.length;a++){var l=Object(r.a)(u[a],2);l[0];l[1].draw(t)}for(var d=0,b=Object.entries(i.nodes);d<b.length;d++){var j=Object(r.a)(b[d],2);j[0];j[1].draw(t)}t.pop()}})}},252:function(t,e,n){"use strict";(function(t){n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return v}));var c=n(22),o=n(1),i=n.n(o),r=n(8),s=n(96),a=n(89),u=(n(60),n(78),n(5),n(38)),l=n(66),d=n(422),b=(new s.web3.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),new s.web3.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),function(){var t=Object(r.a)(i.a.mark((function t(){var e,n,o,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Partial build started"),console.log(u.c.state.construction),t.prev=2,!u.c.state.malloc){t.next=11;break}return t.next=6,u.c.state.malloc.buildWithFill(u.c.state.construction,l.MallocSPLBuildActionMap);case 6:e=t.sent,console.log("Partial build ended"),(n=u.c.state).construction.actionDatas=e.filledNonSpecific.actionDatas,u.c.setState(Object(c.a)({},n));case 11:t.next=18;break;case 13:throw t.prev=13,t.t0=t.catch(2),(null===t.t0||void 0===t.t0?void 0:t.t0.type)===a.MallocErrorTypes.MALLOC_ACTION_BUILDER&&(o=t.t0.filledNonSpecificConstruction)&&((r=u.c.state).construction=o,u.c.setState(Object(c.a)({},r))),console.log("Partial build ended"),t.t0;case 18:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(){return t.apply(this,arguments)}}()),j=function(t,e,n){console.error("Error building flow",t);var o=n.failedAction;t.mallocErrorMarker&&t.type===a.MallocErrorTypes.MALLOC_RUNNER&&(o=t.actionName)&&(e.context.nodes[o].failedRunning=!0,e.context.nodes[o].successfullyRan=!1),e.loading=void 0,u.c.setState(Object(c.a)({},e)),u.b.setState(Object(c.a)(Object(c.a)({},n),{},{failedAction:o,changeToggle:!n.changeToggle,message:(null===t||void 0===t?void 0:t.message)||"An unexpected error occurred: ".concat(t)}))},f=function(){var t=Object(r.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),j(t.t0,e,u.b.state);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}(),p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(t.slice(0,e),"...").concat(t.slice(-e))},h=function(t){return{onTxDone:function(e,n,c){c&&(console.log("ACTIONS SUCCESSFULLY RAN",c),c.map((function(e){t.context.nodes[e].successfullyRan=!0,t.context.nodes[e].failedRunning=!1}))),t.loading={progress:e,max:n},u.c.setState(t)},retryTxOnTimeout:1,customTxTimeoutMs:2e4,commitment:{skipPreflight:!0,commitment:"single"}}},v=function(){var t=Object(r.a)(i.a.mark((function t(e,n,o,r){var s,b,f,p,v,x,O;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.malloc){t.next=3;break}return alert("Please connect your wallet before running a flow"),t.abrupt("return");case 3:return o(!0),s=Object.keys(e.construction.source.mints),t.next=7,Promise.all(s.map((function(t){return a.utils.tokens.getTokenAccountUsedByMalloc(n.publicKey,t)})));case 7:if(b=t.sent,r||(Object.keys(e.construction.actionDatas).map((function(t){e.context.nodes[t].successfullyRan=!1,e.context.nodes[t].failedRunning=!1})),u.c.setState(e)),t.prev=9,!r){t.next=26;break}if(f=Object(d.a)()){t.next=16;break}return alert("Cannot rerun a flow which has yet to run"),o(!1),t.abrupt("return");case 16:return t.next=18,e.malloc.build(e.construction,l.MallocSPLBuildActionMap,{cleanupAtEnd:!0});case 18:return p=t.sent,t.next=21,e.malloc.compileConstruction({construction:p,actionMap:l.MallocSPLBuildActionMap,amountInAccounts:b,opts:{cleanupAtEnd:!0,constructionAccount:f}});case 21:return v=t.sent,t.next=24,e.malloc.runConstructionFromAction(v,r,h(e));case 24:t.next=35;break;case 26:return t.next=28,e.malloc.build(e.construction,l.MallocSPLBuildActionMap,{cleanupAtEnd:!0});case 28:return x=t.sent,t.next=31,e.malloc.compileConstruction({construction:x,actionMap:l.MallocSPLBuildActionMap,amountInAccounts:b,opts:{cleanupAtEnd:!0}});case 31:return O=t.sent,Object(d.b)(O.constructionSigner),t.next=35,e.malloc.runConstruction(O,h(e));case 35:alert("Flow ran successfully!"),e.loading=void 0,u.c.setState(e),u.b.setState(Object(c.a)(Object(c.a)({},u.b.state),{},{failedAction:void 0})),t.next=45;break;case 41:t.prev=41,t.t0=t.catch(9),console.error("An error occurred running the flow",t.t0),j(t.t0,e,u.b.state);case 45:o(!1);case 46:case"end":return t.stop()}}),t,null,[[9,41]])})));return function(e,n,c,o){return t.apply(this,arguments)}}()}).call(this,n(14).Buffer)},38:function(t,e,n){"use strict";n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return v})),n.d(e,"d",(function(){return x})),n.d(e,"a",(function(){return O}));var c=n(1),o=n.n(c),i=n(22),r=n(8),s=n(55),a=n(662),u=n.n(a),l=function(t,e){if(t){e||(e="console.json"),"object"===typeof t&&(t=JSON.stringify(t,void 0,4));var n=new Blob([t],{type:"text/json"}),c=document.createEvent("MouseEvents"),o=document.createElement("a");o.download=e,o.href=window.URL.createObjectURL(n),o.dataset.downloadurl=["text/json",o.download,o.href].join(":"),c.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(c)}else console.error("No data")},d=function(){var t=Object(r.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u()({accept:"application/json"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b={construction:{actionDatas:{swapToUsdc:{action:{actionTypeUID:"MALLOC_SPL_RAYDIUM_SWAP",actionPID:"muZ8k7AinSTHUwyDU34FL9Ebfy2SdAPHFbMLpnUC6yM",inputs:{outMint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"},nextActions:[{lpDepositUsdcRay:1}]}},lpDepositUsdcRay:{action:{actionPID:"muZ8k7AinSTHUwyDU34FL9Ebfy2SdAPHFbMLpnUC6yM",actionTypeUID:"MALLOC_SPL_RAYDIUM_LP_DEPOSIT",inputs:{},nextActions:[{farmUsdcRay:1}]}},farmUsdcRay:{action:{actionPID:"muZ8k7AinSTHUwyDU34FL9Ebfy2SdAPHFbMLpnUC6yM",actionTypeUID:"MALLOC_SPL_RAYDIUM_LP_STAKE_FARM",inputs:{},nextActions:[]}},swapToRay:{action:{actionTypeUID:"MALLOC_SPL_RAYDIUM_SWAP",actionPID:"muZ8k7AinSTHUwyDU34FL9Ebfy2SdAPHFbMLpnUC6yM",inputs:{outMint:"4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"},nextActions:[{lpDepositSolRay:1,lpDepositUsdcRay:1}]}},lpDepositSolRay:{action:{actionPID:"muZ8k7AinSTHUwyDU34FL9Ebfy2SdAPHFbMLpnUC6yM",actionTypeUID:"MALLOC_SPL_RAYDIUM_LP_DEPOSIT",inputs:{hasFarm:!0},nextActions:[{farmSolRay:1}]}},farmSolRay:{action:{actionPID:"muZ8k7AinSTHUwyDU34FL9Ebfy2SdAPHFbMLpnUC6yM",actionTypeUID:"MALLOC_SPL_RAYDIUM_LP_STAKE_FARM",inputs:{},nextActions:[]}}},source:{nextActions:{swapToRay:100,lpDepositSolRay:100,swapToUsdc:100},mints:{So11111111111111111111111111111111111111112:"2000"}}},savedContext:{nodes:{SOURCE:[-183.15625,-19],swapToRay:[-60.15625,-37],lpDepositSolRay:[-47.15625,-168],swapToUsdc:[-52.15625,79],lpDepositUsdcRay:[50.84375,10.984375],farmUsdcRay:[203.84375,14],farmSolRay:[87.84375,-172]},translate:[316.5,250],scale:1}},j=n(129),f=n(163),p={construction:b.construction,context:j.c},h=new s.Store(p),v=new s.Store({changeToggle:!1});Object(f.b)(p,b.savedContext);var x=function(){var t=Object(r.a)(o.a.mark((function t(){var e,n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d();case 2:if(!((e=t.sent).length<1)){t.next=6;break}return alert("Please select a file"),t.abrupt("return");case 6:return t.t0=JSON,t.next=9,e[0].text();case 9:t.t1=t.sent,n=t.t0.parse.call(t.t0,t.t1),(c=h.state).construction=n.construction,Object(f.b)(c,n.savedContext),h.setState(Object(i.a)({},c)),console.log(n);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Object(r.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={construction:h.state.construction,savedContext:Object(f.c)(h.state)},console.log(e),t.next=4,l(JSON.stringify(e),"flow.json");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();h.on(s.StoreEventType.Update,(function(){return console.info(new Date,"Updated Global Store")}))},422:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return s}));var c=n(21),o=n(5),i="ConstructionSigner",r=function(t){window.localStorage.setItem(i,JSON.stringify(Object(c.a)(t.secretKey)))},s=function(){var t=window.localStorage.getItem(i);if(t){var e=JSON.parse(t),n=new Uint8Array(e);return o.Keypair.fromSecretKey(n)}}},69:function(t,e,n){"use strict";n.d(e,"g",(function(){return c})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return l}));var c="#F14A21",o=getComputedStyle(document.body),i=o.getPropertyValue("--light-1"),r=o.getPropertyValue("--light-2"),s=o.getPropertyValue("--green-1"),a=s+"55",u=(o.getPropertyValue("--green-2"),o.getPropertyValue("--dark-1"),o.getPropertyValue("--dark-2")),l=o.getPropertyValue("--dark-3")},699:function(t,e,n){},700:function(t,e,n){},705:function(t,e){},707:function(t,e){},723:function(t,e){},724:function(t,e){},78:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return o}));var c="SOURCE",o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mainnet-beta";switch(t){case"mainnet-beta":return{solana:{RPC:"https://ssc-dao.genesysgo.net/",NETWORK:t}};case"devnet":return{MALLOC_PROGRAM_ID:"9i4MAnhYagLr1vEo5jdmLehRe8Sm5Lx8fHaQNJfbFCve",mallocSpl:{TRANSFER_PROGRAM_ID:"ETpyJNQLorJbAcrPQpM9bkYxYMakegBh93kqZ1KnTBjr",SWAP_PROGRAM_ID:"7T6seoCvCQeUeSTf2EAwX5SnyrZvX7BFUMHi74ZodBKH",DUMMY_PASS_THROUGH:"DBhGd4VREBAw14vV1yaLXfCTtanPBwQfEErg1fe27diJ",MINT_TO:"77WQMNHSBe6BNdMY8R1FD4JX89o2fXr5FhKNerTcJsHJ",SOLEND_ACTION:"BVmJHQLHAAdgALGi6rdGxdsk5ate41kbpDMGL9XAVanP"},projectSerum:{DEX_PROGRAM_ID:"DESVgJVGajEgKGXhb6XmqDHGz3VjdgP7rEVESBgxmroY"},demo:{FAKE_USDC:"AkzN2jJrorpUY2ApfL2UsBeTfuv1XHFKGLQurZJg6BhN",FAKE_USDC_GD:"2BB7fDrLgBNSMCLqD835GisCHrHrGHsS8SJr6brtnWk2",FAKE_TOKEN_A:"9GmQdigrAFdX67EMrVFwMepEN8rEdMdp8CPUEPJRY8sj"},INITIAL_SPLITTER_ID_UUID:"initial",solana:{RPC:"https://explorer-api.devnet.solana.com",NETWORK:t}};default:throw"Unexpected env"}throw"Unexpected env"}},943:function(t,e){},945:function(t,e){},959:function(t,e){},963:function(t,e){},965:function(t,e){},975:function(t,e){},977:function(t,e){}},[[1049,1,2]]]);
//# sourceMappingURL=main.dcffc74e.chunk.js.map