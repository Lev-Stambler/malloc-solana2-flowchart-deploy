(this.webpackJsonpflowchart=this.webpackJsonpflowchart||[]).push([[0],{1006:function(t,e){},1008:function(t,e){},1013:function(t,e){},1015:function(t,e){},1022:function(t,e){},1034:function(t,e){},1037:function(t,e){},1049:function(t,e){},1051:function(t,e,n){"use strict";n.r(e);var c,o=n(0),i=n.n(o),r=n(47),a=n.n(r),s=(n(697),n(698),n(699),n(700),n(1)),u=n.n(s),l=n(8),d=n(22),b=n(15),j=n(68),f=n(426),p=n(112),h=n(322),v=n(164),x=n(53),O=(n(876),n(36)),m=n(66),g=n(4),y=function(){var t=Object(x.useStore)(O.c),e=function(t){return"RAYDIUM_LP_STAKE"===t?"RAYDIUM_LP_FARM":t};return Object(g.jsxs)("div",{children:[Object(g.jsx)("select",{className:"form-select","aria-label":"Default select example",onChange:function(e){t.context.selectedActionType=parseInt(e.target.value),O.c.setState(Object(d.a)({},t))},children:Object.keys(m.splConstants.BUILD_ACTION_UIDS).map((function(t,n){return Object(g.jsx)("option",{value:n,children:e(t)})}))}),Object(g.jsxs)("span",{className:"fine-print",children:["double click to create a new"," ",e(Object.keys(m.splConstants.BUILD_ACTION_UIDS)[t.context.selectedActionType])," ","action"]})]})},S=function(t){var e=Object(x.useStore)(O.c),n=Object(x.useStore)(O.b),c=Object(p.useAnchorWallet)(),i=Object(o.useState)(!1),r=Object(b.a)(i,2),a=r[0],s=r[1],u=Object(o.useState)(!1),l=Object(b.a)(u,2),d=l[0],j=l[1],f=Object(o.useState)(!1),h=Object(b.a)(f,2),m=h[0],S=h[1],w=function(t,o){if(e.malloc&&c){var i=t?n.failedAction:void 0;!d||i?(console.log(i),Object(v.b)(e,c,o,i)):alert("You can only rerun from a failure if a previous failure has occurred")}else alert("Please connect your wallet before running a flow")};return Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"left",gap:"1rem"},children:[Object(g.jsx)(y,{}),Object(g.jsx)("button",{className:"controls",onClick:function(){return function(){if(window.confirm("Clearing the flow is (currently) irreversible. Are you sure?"))for(var t=Object.keys(e.construction.actionDatas),n=0;n<t.length;n++)Object(v.a)(t[n])}()},children:"Clear All"})]}),Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"right",gap:"1rem"},children:[Object(g.jsx)("button",{className:"controls",onClick:function(){return Object(O.d)()},children:"Import"}),Object(g.jsx)("button",{className:"controls",onClick:function(){return Object(O.a)()},children:"Export"}),Object(g.jsx)("button",{className:"controls",onClick:function(){S(!0),Object(v.d)(e).finally((function(){return S(!1)}))},disabled:m,children:m?"Building...":"Build"}),Object(g.jsx)("button",{className:"controls",disabled:a,onClick:function(){return w(!1,s)},children:a?"Running...":"Build and Run"}),n.failedAction&&Object(g.jsx)("button",{className:"controls",disabled:a,onClick:function(){return w(!0,j)},children:d?"Rerunning...":"Rerun failed"})]})]})},w=n(21),A=n(5),M=new x.Store({derivedTokenAccounts:null,tokenList:null,raydium:{liquidityPools:null}}),k=function(){var t=Object(l.a)(u.a.mark((function t(){var e,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(){var t=Object(l.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!M.state.raydium.liquidityPools){t.next=2;break}return t.abrupt("return",M.state.raydium.liquidityPools);case 2:return t.next=4,m.utils.raydium.getMainnetRaydiumPools();case 4:return e=t.sent,M.setState(Object(d.a)(Object(d.a)({},M.state),{},{raydium:Object(d.a)(Object(d.a)({},M.state.raydium),{},{liquidityPools:e})})),t.abrupt("return",e);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,e();case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=n(1117),C=n(1116),D=n(1109),T=n(1113),U=n(1125),P=n(431),N=n(79),L=["So11111111111111111111111111111111111111112","9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E","2FPyTwcZLUg1MDrwsyoP4D6s1tM7hAkHYRjkNb5w6Pxk","Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB","BQcdHdAQW1hczDbBi9hiegXAR7A98Q9jx3X3iBBBDiq4","EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","BXXkv6z8ykpG1yuvUDPgh732wzVHB69RnB9YgSYh3itW","3JSf5tPeuscJGtaCp5giEiDhv51gQ4v3zWg8DGgyLfAB","CWE8jPTUYhdCTZYWPTe1o5DFqfdjzWKc9WKz6rSjQUdG","Ga2AXHpfAF6mv2ekZwcsJFqu7wB4NV331qNH7fW9Nst8","AR1Mtgh7zAtxuxGd2XPovXPVjcSdY3i4rQYisNadjfKy","CsZ5LZkDS7h9TDKjrbL7VAwQZ9nsRu8vJLhRYfmGaN8K","SF3oTvfWzEP3DTwGSvUXRrGTvr75pdZNnBLAH9bzMuX","BtZQfWqDGbk9Wf2rXEiWyQBdBY1etnUUn6zEphvVS7yN","5Fu5UUgbjpUvdBveb3a1JTNirL8rXtiYeSMWvKjtUNQv","DEhAasscXF4kEGxFgJ3bq4PpVGp5wyUxMRvn6TzGVHaw","SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt","AGFEad2et2ZJif9jaGpdMixQqvW5i81aBdvKe7PHNfz3","MSRMcoVyrFxnSgo5uXwone5SKcGhT1KEJMFEkMEWf9L","GXMvfY2jpQctDqZ9RoU3oWPhufKiCcFEfchvYumtX7jd","EcqExpGNFBve2i1cMJUTR4bPXj4ZoqmDD2rTkeCcaTFX","EqWCKXfs3x47uVosDpTRgFniThL9Y8iCztJaapxbEaVX","GeDS162t9yGJuLEHPWXXGrb1zwkzinCgRwnT8vHYjKza","GUohe4DJUA5FKPWo3joiPgsB7yzer7LpDmt1Vhzy3Zht","9F9fNTT6qwjsu4X4yWYKZpsbw5qT7o6yR2i57JF2jagy","EchesyfXePKdLtoiZSL8pBe8Myagyy8ZRqsACNCFGnvp","kinXdEcpDQeHPEuQnqmUgtYykqKGVFq6CeVX5iAHJq6","MAPS41MDahZ9QdKXhVa4dWB9RuyfV4XqhyAZ8XcYepb","z3dn17yLaGMKffVogeFHQ9zWVcXgqgf3PQnDsNs2g6M","4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R","3K6rftdAaQYMPunrtNRHgnK2UAtjm2JwyT2oCiTDouYE","8HGyAAB1yoM1ttS7pXjHMa3dukTFGQggnFFH3hJZgzQh","StepAscQoEioFxxWGnh2sLBDFp9d8rvKz2Yp39iDpyT","ETAtLmCmsoiEEKfNrHKJ2kYy3MoABhU6NQvpSfij5tDs","8PMHT4swUMtBzgHnh5U564N5sjPSiUz2cjEQzFnnP1Fo","MERt85fc5boKw3BW1eYdxonEuJNvXbiMbs6hvheau5K","TuLipcqtGVXP9XR62wM8WWCm6a9vhLs7T1uoWBk6FDs","4dmKkXNHdgYsXqBHCuMikNQWwVomZURhYvkkX5c4pQ7y","SLRSSpSLUTP7okbCUBYStWCo1vUgyt775faPqz8HUMr","E5rk3nmgLUuKUiS94gg4bpWwWwyjCMtddsAXkTFLtHEy","BLwTnYKqf7u4qjgZrrsKeNs2EzWkMLqVCu6j8iHyrNA3","7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU","CDJWUqTcYTVAKXAVXoQZFes5JUFc7owSeq7eMQcDSbo5","ArUkYE2XDKzqy77PRRGjo4wREWwqk6RXTfM9NeqzPvjU","3bRTivrVsitbmCTGtqwp7hxXPsybkjn4XLNtPsHqa3zR","GsNzxJfFn6zQdJGeYsupJWzUAm57Ba7335mfhWvFiE9Z","mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So","Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS","PoRTjZMPXb9T7dyU7tpLEZRQj7e6ssfAE62j2oQuc6y","MangoCzJ36AjZyKwVj3VnYU4GTonjfVEnJmvvWaxLac","DubwWZNWiNGMMeeQHPnMATNj77YZPZSAz2WVR5WjLJqz","ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx","poLisWXnNRwC6oBu1vHiuKQzFjGL4XDSu4g9qjz9qVk","8upjSpvjcdpuzhfR1zriwg5NXkwDruejqNE9WNbPRtyA","3FoUAsGDbvTD6YZ4wVKJgTB76onJUKz7GPEBNiR5b8wc","7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj","Lrxqnh6ZHKbGy3dcrCED43nsoLkM1LTzU2jRfWe8qUC","E5ndSkaB17Dm7CsD22dvcjfrYSDLCxFcMd6z8ddCk5wp","51tMb3zBKDiQhNwGqpgwbavaGH54mk8fXFzxTc1xnasg","MNDEFzGvMt87ueuHvVU9VcTqsAP5b3fTGPsHuuPA5ey","4wjPQJ6PrkC4dHhYghwJzGBVP78DkBzA2U3kHoFNBuhj","5tN42n9vMi6ubp67Uy4NnmM5DMZYN8aS8GeB3bEDHr6E","HZRCwxP2Vq9PCpPXooayhJ2bxTpo5xfpQrwB1svh332p","xxxxa1sKNGwFtw2kFn8XauW9xq8hBZ5kVtcSesTT9fW","PRT88RkA4Kg5z7pKnezeNH4mafTvtQdfFgpQTGRjz44","Saber2gLauYim4Mvftnrasomsv6NvAuncvMEZwcLpD1","EdAhkbj5nF9sRM7XN7ewuW8C9XEUMs8P7cnoQ57SYE96","a11bdAAuV8iB2fu7X6AxAvDTo1QZ8FXB3kk5eecdasp","iVNcrNE9BRZBC9Aqf753iZiZfbszeAVUoikgT9yvr2a","BRLsMczKuaR5w9vSubF4j8HwEGGprVAyyVgS4EX7DKEg","ErGB9xa24Szxbk1M28u2Tx8rKPqzL6BroNkkzk5rG4zj","AURYydfxJib1ZkTir1Jn1J9ECYUtjb6rKQVmtYaixWPP","FnKE9n6aGjQoNWRBZXy4RW6LZVao7qwBonUbiD7edUmZ","9nEqaUcb16sQ3Tn1psbkWqyhPdLmfHWjKGymREjsAgTE","orcaEKTdK7LKz57vaAYr9QeNsVEPfiu6QeMU1kektZE","SLNDpmoWTVADgEdndyvWzroNL7zSi1dF9PC3xHGtPwp","7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs","8FU95xFJhUUkyyCLU13HSzDLs7oC4QZdXQHL6SCeab36","ChVzxWRmrTeSgwd3Ui3UumcN8KX7VK3WaD4KGeSKpypj","GFX1ZjR2P15tmrSwow6FjyDYcEkoFb4p4gJCpLBjaxHD","inL8PMVd6iiW3RCBJnr5AsrRN6nqr4BTrcNuQWQSkvY","4Hx6Bj56eGyw8EJrrheM6LBQAvVYRikYCWsALeTrwyRU","HCgybxq5Upy8Mccihrp7EsmwwFqYZtrHrsmsKwtGXLgW","HysWcbHiYY9888pHbaqhwLYZQeZrcQMXKQWRqS7zcPK5","CiKu4eHsVrc1eueVQeHn7qhXTcVu95gSQmBpX4utjL9z"],R=function(){var t=Object(l.a)(u.a.mark((function t(){var e,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(){var t=Object(l.a)(u.a.mark((function t(){var e,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!M.state.tokenList){t.next=2;break}return t.abrupt("return",M.state.tokenList);case 2:return t.next=4,(new P.b).resolve(P.a.Solana);case 4:return e=t.sent,n=e.filterByClusterSlug(Object(N.b)().solana.NETWORK).getList(),M.setState(Object(d.a)(Object(d.a)({},M.state),{},{tokenList:n})),t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,e();case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),F=function(){var t=Object(l.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R();case 2:return n=t.sent,t.abrupt("return",n.find((function(t){return t.address===e.toString()})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=n(78),B=n(42),W=n.n(B),X=n(69),K=n(20),Y=n(1107),z=(n(877),n(1105)),H=n(1127);function G(t){var e,n=o.useState(0),c=Object(b.a)(n,2),i=(c[0],c[1]);return o.useEffect((function(){var t=setInterval((function(){i((function(t){if(100===t)return 0;var e=10*Math.random();return Math.min(t+e,100)}))}),500);return function(){clearInterval(t)}}),[]),Object(g.jsx)(z.a,{sx:{width:"100%"},children:Object(g.jsx)(H.a,{variant:"determinate",value:(e=t,100*(e.value-e.min)/(e.max-e.min))})})}var q,_,V=Object(K.a)(Y.a)(c||(c=Object(j.a)(["\n  width: 100px;\n"]))),Q=function(t){var e=Object(x.useStore)(O.c),n=e.context.nodes[e.context.selectedNodeId].outEdges[t.outEdgeId],c=i.a.useState(t.nextActions[t.outEdgeId]),o=Object(b.a)(c,2),r=o[0],a=o[1];return Object(g.jsxs)("div",{onMouseOver:function(){n.highlighted=!0},onMouseOut:function(){n.highlighted=!1},className:"slider--wrapper",children:[Object(g.jsx)("h6",{style:{width:"150px"},children:t.outEdgeId}),Object(g.jsx)(V,{value:r,size:"small",onChange:function(e){var n=""===e.target.value?0:Number(e.target.value);a(n),t.nextActions[t.outEdgeId]=n,t.updateNextActions(t.nextActions)},onBlur:function(){r<0&&a(0)},style:{color:"#ffffff",minWidth:"120px"},inputProps:{step:10,min:0,type:"number","aria-labelledby":"input-slider"}}),Object(g.jsx)("div",{style:{width:"50px"},children:Object(g.jsx)(G,{value:Number(r)/J(t.nextActions),min:0,max:1})}),Object(g.jsx)("button",{className:"delete",onClick:function(t){var c=n.node1,o=n.node2,i=e.context.selectedOutMintIndex;delete e.context.nodes[c.id].outEdges[o.id],c.isSource?delete e.construction.source.nextActions[o.id]:delete e.construction.actionDatas[c.id].action.nextActions[i][o.id],O.c.setState(Object(d.a)({},e))},children:"x"})]})},J=function(t){return Object.keys(t).reduce((function(e,n){return e+t[n]}),0)},Z=function(t){return Object(g.jsx)("div",{children:Object.keys(t.nextActions).map((function(e){return Object(g.jsx)(Q,{outEdgeId:e,nextActions:t.nextActions,updateNextActions:t.updateNextActions})}))})},$=function(t){var e=t.tok,n=t.mint,c=Object(o.useState)(null),i=Object(b.a)(c,2),r=i[0],a=i[1];return Object(o.useEffect)((function(){n&&F(n).then((function(t){a(t||{chainId:0,address:n.toString(),name:"Unkown token",decimals:6,symbol:"UNKOWN"})}))}),[n]),Object(o.useEffect)((function(){e&&a(e)}),[e]),r?Object(g.jsxs)("div",{style:{cursor:"pointer"},onClick:function(){t.onClick&&t.onClick(r)},children:[r.logoURI&&Object(g.jsx)("img",{src:r.logoURI,style:{height:"14px"}})," ",t.amount?I.utils.tokens.toReadableNumber(new W.a(t.amount),r.decimals):""," ",r.symbol,void 0!=t.updateFn&&Object(g.jsx)(V,{type:"number",value:t.amount?parseFloat(I.utils.tokens.toReadableNumber(new W.a(t.amount),r.decimals)):null,size:"small",onChange:function(e){if(t.updateFn&&t.inputMints&&t.mint){var n=I.utils.tokens.fromReadableNumber(Number(""===e.target.value?"0":e.target.value),r.decimals);t.inputMints[t.mint.toString()]=n,t.updateFn(t.inputMints)}},style:{color:X.e}})]}):Object(g.jsx)("div",{children:"Loading..."})},tt=Object(D.a)(U.a)(q||(q=Object(j.a)(["\n  position: fixed;\n  z-index: 1300;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),et=Object(D.a)("div")(_||(_=Object(j.a)(["\n  z-index: -1;\n  position: fixed;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-tap-highlight-color: transparent;\n"]))),nt={width:400,bgcolor:"background.paper",border:"2px solid #000",p:2,px:4,pb:3};function ct(t){var e,n=o.useState(!1),c=Object(b.a)(n,2),i=c[0],r=c[1];return Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{type:"button",className:"controls2",onClick:function(){return r(!0)},children:null!==(e=t.buttonText)&&void 0!==e?e:"Choose Token"}),Object(g.jsx)(tt,{"aria-labelledby":"unstyled-modal-title","aria-describedby":"unstyled-modal-description",open:i,onClose:function(){return r(!1)},BackdropComponent:et,children:Object(g.jsxs)(T.a,{sx:nt,children:[Object(g.jsx)("h2",{id:"unstyled-modal-title",children:"Select Mint"}),Object(g.jsx)("div",{children:Object(g.jsx)(rt,{includedMints:t.includedMints,onSelect:t.onSelect})})]})})]})}var ot,it,rt=function(t){var e=t.onSelect,n=o.useState(""),c=Object(b.a)(n,2),i=c[0],r=c[1],a=o.useState(null),s=Object(b.a)(a,2),u=s[0],l=s[1],j=o.useState(null),f=Object(b.a)(j,2),p=f[0],h=f[1];return o.useEffect((function(){u&&e&&e(null===u||void 0===u?void 0:u.token)}),[u]),o.useMemo((function(){R().then((function(e){var n=function(e){var n,c=null!==(n=t.includedMints)&&void 0!==n?n:L;return e.filter((function(t){return c.includes(t.address)})).map((function(t){return{label:t.symbol,token:t}}))}(e);h(n)}))}),[]),Object(g.jsx)("div",{children:p?Object(g.jsx)(C.a,{value:u,inputValue:i,onChange:function(t,e){l(e)},onInputChange:function(t,e){r(e)},id:"combo-box-demo",getOptionLabel:function(t){return t.label},isOptionEqualToValue:function(t,e){return t.label===e.label},options:p,sx:{width:300,backgroundColor:"white"},renderOption:function(t,e){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)($,{tok:e.token,onClick:function(t){l({label:t.symbol,token:t})}})})},renderInput:function(t){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(E.a,Object(d.a)(Object(d.a)({},t),{},{label:"Mint"}))})}}):Object(g.jsx)("div",{children:"loading..."})})},at=function(t){var e=Object(o.useState)(void 0),n=Object(b.a)(e,2),c=n[0],i=n[1],r=function(){var t=Object(l.a)(u.a.mark((function t(e){var n,c,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k();case 2:if(n=t.sent,!e){t.next=8;break}return c=new A.PublicKey(e),t.abrupt("return",n.filter((function(t){return t.baseMint.equals(c)||t.quoteMint.equals(c)})).map((function(t){return t.baseMint.equals(c)?t.quoteMint.toBase58():t.baseMint.toBase58()})));case 8:return o=n.map((function(t){return[t.baseMint.toBase58(),t.quoteMint.toBase58()]})).flat(),t.abrupt("return",Object(w.a)(new Set(o)));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){r(t.inputMint).then((function(t){return i(t)}))}),[t.inputMint]),Object(g.jsxs)(g.Fragment,{children:["Out Mint:"," ",t.input.outMint?Object(g.jsx)($,{mint:t.input.outMint}):Object(g.jsx)(g.Fragment,{children:"Unset"}),Object(g.jsx)(ct,{buttonText:"Choose mint",includedMints:c,onSelect:function(e){t.updateInput({outMint:e.address})}})]})},st=function(t){var e=Object(o.useState)(!1),n=Object(b.a)(e,2),c=n[0],i=n[1],r=Object(o.useState)(null),a=Object(b.a)(r,2),s=a[0],u=a[1];return Object(o.useEffect)((function(){var e;(null===(e=t.input)||void 0===e?void 0:e.recipientWallet)&&u(t.input.recipientWallet)}),[t.input]),Object(g.jsxs)(g.Fragment,{children:["Recipient Address:"," ",Object(g.jsx)(E.a,{error:c,style:{backgroundColor:X.b},InputProps:{style:{color:X.e}},label:c?"Please enter a valid wallet address":"",value:s,onChange:function(t){return u(t.target.value)},onBlur:function(e){try{new A.PublicKey(e.target.value),t.updateInput({recipientWallet:e.target.value}),i(!1)}catch(n){i(!0)}}})]})},ut=function(t){var e=Object(o.useState)(void 0),n=Object(b.a)(e,2),c=n[0];n[1];return Object(g.jsxs)(g.Fragment,{children:[void 0!==t.inputMints&&0!==Object.keys(t.inputMints).length?Object.keys(t.inputMints).map((function(e){return Object(g.jsxs)("div",{style:{display:"grid",gap:"1rem",alignItems:"center",gridTemplateColumns:"150px 1fr 30px"},children:[Object(g.jsx)($,{mint:e,amount:t.inputMints[e].toString(),updateFn:t.updateSource,inputMints:t.inputMints}),Object.keys(t.inputMints).length>1&&Object(g.jsx)("button",{className:"controls2",onClick:function(){delete t.inputMints[e],t.updateSource(t.inputMints)},children:"x"})]})})):Object(g.jsx)(g.Fragment,{children:"Unset"}),Object(g.jsx)("br",{}),Object(g.jsx)(ct,{buttonText:"add mint",includedMints:c,onSelect:function(e){t.inputMints[e.address]="100",t.updateSource(t.inputMints)}}),Object(g.jsx)("br",{})]})},lt=n(1129),dt=n(1124),bt=n(1118),jt=function(t){var e,n;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(lt.a,{children:Object(g.jsx)(dt.a,{control:Object(g.jsx)(bt.a,{defaultChecked:null!==(e=null===(n=t.input)||void 0===n?void 0:n.hasFarm)&&void 0!==e&&e,onChange:function(e){t.updateInput({hasFarm:e.target.checked})}}),label:"Ensure that a farm exists"})})})},ft=function(t,e,n,c,o,i){var r;switch(t){case N.a:return Object(g.jsx)(ut,{updateSource:n,inputMints:o});case m.splConstants.BUILD_ACTION_UIDS.TRANSFER:return Object(g.jsx)(st,{updateInput:e,input:c});case m.splConstants.BUILD_ACTION_UIDS.RAYDIUM_LP_STAKE:return null;case m.splConstants.BUILD_ACTION_UIDS.RAYDIUM_LP_DEPOSIT:return Object(g.jsx)(jt,{updateInput:e,input:c});case m.splConstants.BUILD_ACTION_UIDS.RAYDIUM_SWAP:return Object(g.jsx)(at,{updateInput:e,input:c,inputMint:null===i||void 0===i||null===(r=i.inMints)||void 0===r?void 0:r[0]});case m.splConstants.BUILD_ACTION_UIDS.SOLEND_LP_DEPOSIT:default:return null}},pt=function(){var t=Object(x.useStore)(O.c),e=t.context.nodes[t.context.selectedNodeId];if(!e)return Object(g.jsx)(g.Fragment,{});var n,c,o,i,r=e.isSource;r?(c=N.a,o=null,i=t.construction.source.nextActions):(c=(n=t.construction.actionDatas[e.id].action).actionTypeUID,o=n.inputs,i=n.nextActions,m.MallocSPLBuildActionMap[c].expectedNumberOutMints);var a=function(e){t.construction.source.mints=e,O.c.setState(Object(d.a)({},t))},s=function(n){t.construction.actionDatas[e.id].action.inputs=n,O.c.setState(Object(d.a)({},t))},u=r?ft(c,s,a,o,t.construction.source.mints):ft(c,s,a,o,t.construction.source.mints,n),l=function(n){e.isSource?t.construction.source.nextActions=n:t.construction.actionDatas[e.id].action.nextActions[t.context.selectedOutMintIndex]=n,O.c.setState(Object(d.a)({},t))},b=function(){return e.isSource?t.construction.source.nextActions:t.construction.actionDatas[e.id].action.nextActions[t.context.selectedOutMintIndex]};return Object(g.jsxs)("div",{className:"card",children:[Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(g.jsx)("input",{value:e.id,type:"text",className:"inputField",style:{width:"90%"},onChange:function(t){}}),!e.isSource&&Object(g.jsx)("button",{className:"delete",onClick:function(){Object(v.a)(e.id)},children:"x"})]}),Object(g.jsx)(T.a,{sx:{m:2},children:Object(g.jsx)("h5",{children:"Input"})}),u&&u,Object(g.jsx)("div",{children:(r||i&&i.length>=1)&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h5",{children:"Next Actions"}),r&&Object(g.jsx)(Z,{updateNextActions:l,nextActions:b()}),!r&&i.map((function(t,e){return Object(g.jsx)(Z,{updateNextActions:l,nextActions:b()})}))]})})]})},ht=n(165),vt=function(t){var e=t.mints,n=t.amounts;return Object(g.jsx)(g.Fragment,{children:e.map((function(t,e){return Object(g.jsx)($,{mint:t,amount:n[e]},"Estimate-line-".concat(e,"-").concat(t.toString()))}))})},xt=function(t){return void 0!==t},Ot=function(){var t=Object(x.useStore)(O.c),e=t.context.nodes[t.context.selectedNodeId],n=t.construction.actionDatas[e.id].action;return Object(g.jsxs)("div",{className:"card",style:{},children:[Object(g.jsx)("h3",{children:"Estimates"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h4",{children:"Expected In"}),xt(n.inEstimates)||Object(g.jsx)("p",{children:"We can only give estimates once the entire flow can be built!"}),xt(n.inEstimates)&&Object(g.jsx)(vt,{mints:n.inEstimates.map((function(t){return t.mint})),amounts:n.inEstimates.map((function(t){return t.amount}))})]}),Object(g.jsxs)("div",{children:[xt(n.outEstimates)||Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h4",{children:"Expected Out"}),Object(g.jsx)("p",{children:"We can only give estimates once the entire flow can be built!"})]}),xt(n.outEstimates)&&n.outEstimates.length>0&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h4",{children:"Expected Out"}),Object(g.jsx)(vt,{mints:n.outEstimates.map((function(t){return t.mint})),amounts:n.outEstimates.map((function(t){return t.amount}))})]})]})]})},mt=function(t){var e=Object(x.useStore)(O.c),n=e.context.nodes[e.context.selectedNodeId],c=null===n||void 0===n?void 0:n.isSource;return Object(g.jsxs)("div",{className:"table--wrapper",children:[Object(g.jsxs)("div",{className:"node-info--wrapper",children:[Object(g.jsx)(pt,{}),Object(g.jsx)("br",{}),c||Object(g.jsx)(Ot,{})]}),Object(g.jsx)("div",{className:"flow-controls--wrapper",children:Object(g.jsx)(S,{connection:t.connection})}),Object(g.jsxs)("div",{id:"graph-container",children:[Object(g.jsx)("div",{id:"canvas-container",children:Object(g.jsx)(ht.a,{})}),Object(g.jsx)("span",{className:"fine-print",children:"Create nodes and edges in the canvas. Delete nodes and edges in the editor panel"}),e.loading&&Object(g.jsxs)("div",{children:[Object(g.jsx)("h4",{children:"Running your flow..."}),Object(g.jsx)(G,{value:e.loading.progress,max:e.loading.max,min:0})]})]})]})},gt=n(95),yt=function(t){return new gt.Provider(new A.Connection(Object(N.b)().solana.RPC),t,{})},St=n(1122),wt=n(1119),At=Object(f.a)(h.WalletDialogButton)(ot||(ot=Object(j.a)([""]))),Mt=(f.a.span(it||(it=Object(j.a)([""]))),function(t){var e,n=Object(o.useState)(),c=Object(b.a)(n,2),i=c[0],r=c[1],a=Object(o.useState)(!1),s=Object(b.a)(a,2),j=(s[0],s[1],Object(o.useState)(!1)),f=Object(b.a)(j,2),h=(f[0],f[1],Object(o.useState)(!1)),m=Object(b.a)(h,2),y=(m[0],m[1],Object(o.useState)({open:!1,message:"",severity:void 0})),S=Object(b.a)(y,2),w=S[0],A=S[1],M=Object(p.useWallet)(),k=Object(p.useAnchorWallet)(),E=Object(x.useStore)(O.c),C=function(){k&&O.c.setState(Object(d.a)(Object(d.a)({},E),{},{malloc:new I.MallocSdk(I.constants.PIDS.mainnet.MALLOC,yt(k),"mainnet-beta")}))};return Object(o.useEffect)((function(){C()}),[]),Object(o.useEffect)((function(){Object(l.a)(u.a.mark((function e(){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===k||void 0===k?void 0:k.publicKey)){e.next=7;break}return e.next=3,t.connection.getBalance(k.publicKey);case 3:n=e.sent,c=I.utils.tokens.toReadableNumber(new gt.BN(n),9),r(parseFloat(c).toFixed(4)),C();case 7:case"end":return e.stop()}}),e)})))()}),[M.publicKey]),Object(g.jsxs)("main",{children:[Object(g.jsxs)("div",{className:"header",children:[Object(g.jsx)("div",{style:{display:"flex",justifyContent:"left",gap:"1rem"},children:Object(g.jsx)("h1",{children:"malloc"})}),Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"right",gap:"1rem"},children:[M.connected&&Object(g.jsx)("div",{children:Object(g.jsxs)("p",{style:{marginTop:0},children:["Address: ",Object(v.c)((null===(e=M.publicKey)||void 0===e?void 0:e.toBase58())||"")," ",Object(g.jsx)("br",{}),"Balance: ",(i||0).toLocaleString()," SOL"]})}),!M.connected&&Object(g.jsx)(At,{children:"Connect Wallet"}),Object(g.jsx)("a",{href:"https://twitter.com/MallocProtocol",target:"_blank",children:Object(g.jsx)("i",{className:"bi bi-twitter"})}),Object(g.jsx)("a",{href:"https://discord.gg/QTeDHd3Feg",target:"_blank",children:Object(g.jsx)("i",{className:"bi bi-discord"})}),Object(g.jsx)("a",{href:"mailto:mallocprotocol@gmail.com",target:"_blank",children:Object(g.jsx)("i",{className:"bi bi-mailbox"})}),Object(g.jsx)("a",{href:"https://forms.gle/5xLmGcYspJb1dbXP9",children:Object(g.jsx)("i",{className:"bi bi-bug-fill"})})]})]}),Object(g.jsx)(St.a,{open:w.open,autoHideDuration:6e3,onClose:function(){return A(Object(d.a)(Object(d.a)({},w),{},{open:!1}))},children:Object(g.jsx)(wt.a,{onClose:function(){return A(Object(d.a)(Object(d.a)({},w),{},{open:!1}))},severity:w.severity,children:w.message})}),Object(g.jsx)(mt,{connection:t.connection})]})}),kt=n(341),Et=n(1126),Ct=n(668),Dt=n.n(Ct);function Tt(){Object(x.useStore)(O.c);var t=Object(x.useStore)(O.b),e=o.useState(!0),n=Object(b.a)(e,2),c=n[0],i=n[1];o.useEffect((function(){i(!0)}),[t.changeToggle]);var r=function(t,e){"clickaway"!==e&&i(!1)},a=Object(g.jsx)(o.Fragment,{children:Object(g.jsx)(Et.a,{size:"small","aria-label":"close",color:"inherit",onClick:r,children:Object(g.jsx)(Dt.a,{fontSize:"small"})})});return t.message?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(St.a,{open:c,autoHideDuration:6e3,onClose:r,message:t.message||"",action:a})}):Object(g.jsx)(g.Fragment,{})}Object(N.b)().solana.NETWORK;var Ut=Object(N.b)().solana.RPC,Pt=new gt.web3.Connection(Ut),Nt=function(){var t=Object(x.useStore)(O.c),e=Object(o.useMemo)((function(){return Object(A.clusterApiUrl)("mainnet-beta")}),[]),n=Object(o.useMemo)((function(){return[Object(kt.getPhantomWallet)(),Object(kt.getSolflareWallet)(),Object(kt.getSolletWallet)()]}),[]);return Object(o.useEffect)((function(){Object(ht.b)(t)}),[]),Object(g.jsx)(p.ConnectionProvider,{endpoint:e,children:Object(g.jsx)(p.WalletProvider,{wallets:n,autoConnect:!0,children:Object(g.jsxs)(h.WalletDialogProvider,{children:[Object(g.jsx)(Mt,{connection:Pt,txTimeout:3e4}),Object(g.jsx)(Tt,{})]})})})},Lt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,1131)).then((function(e){var n=e.getCLS,c=e.getFID,o=e.getFCP,i=e.getLCP,r=e.getTTFB;n(t),c(t),o(t),i(t),r(t)}))};a.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(Nt,{})}),document.getElementById("root")),Lt()},129:function(t,e,n){"use strict";n.d(e,"b",(function(){return b})),n.d(e,"a",(function(){return j})),n.d(e,"c",(function(){return f}));var c=n(11),o=n(13),i=n(79),r=n(69),a=function(t,e){return[t[0]+e[0],t[1]+e[1]]},s=function(t,e){return[t[0]-e[0],t[1]-e[1]]},u=function(t,e){return[t[0]*e,t[1]*e]},l=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},d=function(t,e,n,c){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-c,2))},b=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Object(c.a)(this,t),this.pos=void 0,this.vel=void 0,this.acc=void 0,this.actionType=void 0,this.r=void 0,this.r2=void 0,this.r3=void 0,this.hover=void 0,this.hover2=void 0,this.id=void 0,this.selected=void 0,this.successfullyRan=void 0,this.failedRunning=void 0,this.isSource=void 0,this.outEdges=void 0,this.pos=n,this.vel=[0,0],this.acc=[0,0],this.r=15,this.r2=2*this.r,this.r3=4*this.r,this.hover=!1,this.hover2=!1,this.actionType=r,this.id=e,this.selected=i,this.isSource=o,this.failedRunning=!1,this.successfullyRan=!1,this.outEdges={}}return Object(o.a)(t,[{key:"updateHover",value:function(t,e){this.hover=d(t,e,this.pos[0],this.pos[1])<this.r,this.hover2=d(t,e,this.pos[0],this.pos[1])<this.r2}},{key:"repel",value:function(t){var e=s(this.pos,t.pos),n=l(e);if(e=u(e,1/n),n<this.r3){var c=-1/(n*n);t.acc=a(t.acc,u(e,c))}else t.acc=[0,0]}},{key:"draw",value:function(t){t.noStroke(),t.fill(r.e),t.circle(this.pos[0],this.pos[1],2*this.r),this.selected&&(t.stroke(r.c),t.strokeWeight(3),t.noFill(),t.circle(this.pos[0],this.pos[1],2*this.r*1.5)),this.failedRunning?t.fill(r.g):this.successfullyRan?t.fill(r.c):this.isSource?t.fill(r.a):t.fill(r.f),t.noStroke(),t.circle(this.pos[0],this.pos[1],2*this.r*.7),this.hover?(t.fill(r.e),t.textSize(15),t.text(this.id,this.pos[0]-t.textWidth(this.id)/2,this.pos[1]-30)):this.hover2&&(t.noStroke(),t.fill(r.d),t.circle(this.pos[0],this.pos[1],2*this.r2)),t.mouseIsPressed||(this.pos=a(this.pos,this.vel),this.vel=a(this.vel,this.acc))}}]),t}(),j=function(){function t(e,n){Object(c.a)(this,t),this.node1=void 0,this.node2=void 0,this.highlighted=void 0,this.weight=void 0,this.arrowSize=void 0,this.node1=e,this.node2=n,this.weight=5,this.highlighted=!1,this.arrowSize=10}return Object(o.a)(t,[{key:"drawArrow",value:function(t){var e,n=this.node1.pos,c=s(this.node2.pos,n);t.push(),t.translate(n[0],n[1]),t.line(0,0,c[0],c[1]),t.rotate((e=c,Math.atan2(e[1],e[0])));var o=this.arrowSize;t.translate(l(c)-o-this.node2.r,0),t.triangle(0,o/2,0,-o/2,o,0),t.pop()}},{key:"draw",value:function(t){t.strokeWeight(this.weight),t.stroke(r.f),t.fill(r.f),this.drawArrow(t),this.highlighted&&(t.stroke(r.d),t.strokeWeight(5*this.weight),t.line(this.node1.pos[0],this.node1.pos[1],this.node2.pos[0],this.node2.pos[1]))}}]),t}(),f={initialized:!1,scale:1,translate:[0,0],selectedOutMintIndex:0,selectedActionType:0,selectedNodeId:i.a,activeEdge:null,nodes:{SOURCE:new b(i.a,[0,0],!0)}}},164:function(t,e,n){"use strict";(function(t){n.d(e,"d",(function(){return x})),n.d(e,"c",(function(){return O})),n.d(e,"b",(function(){return g})),n.d(e,"a",(function(){return y}));var c=n(15),o=n(22),i=n(1),r=n.n(i),a=n(8),s=n(145),u=n(95),l=n(78),d=(n(60),n(79),n(5)),b=n(36),j=n(66),f=n(421),p=n(662),h=(new u.web3.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),new u.web3.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),function(){var t=Object(a.a)(r.a.mark((function t(){var e,n,c,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Partial build started"),console.log(b.c.state.construction),t.prev=2,!b.c.state.malloc){t.next=11;break}return t.next=6,b.c.state.malloc.buildWithFill(b.c.state.construction,j.MallocSPLBuildActionMap);case 6:e=t.sent,console.log("Partial build ended"),(n=b.c.state).construction.actionDatas=e.filledNonSpecific.actionDatas,b.c.setState(Object(o.a)({},n));case 11:t.next=18;break;case 13:throw t.prev=13,t.t0=t.catch(2),(null===t.t0||void 0===t.t0?void 0:t.t0.type)===l.MallocErrorTypes.MALLOC_ACTION_BUILDER&&(c=t.t0.filledNonSpecificConstruction)&&((i=b.c.state).construction=c,b.c.setState(Object(o.a)({},i))),console.log("Partial build ended"),t.t0;case 18:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(){return t.apply(this,arguments)}}()),v=function(t,e,n){console.error("Error building flow",t);var c=n.failedAction;t.mallocErrorMarker&&t.type===l.MallocErrorTypes.MALLOC_RUNNER&&(c=t.actionName)&&(e.context.nodes[c].failedRunning=!0,e.context.nodes[c].successfullyRan=!1),e.loading=void 0,b.c.setState(Object(o.a)({},e)),Object(p.a)((null===t||void 0===t?void 0:t.message)||"An unexpected error occurred: ".concat(t),n,c)},x=function(){var t=Object(a.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),v(t.t0,e,b.b.state);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}(),O=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(t.slice(0,e),"...").concat(t.slice(-e))},m=function(t){return{onTxDone:function(e,n,c){c&&(console.log("ACTIONS SUCCESSFULLY RAN",c),c.map((function(e){t.context.nodes[e].successfullyRan=!0,t.context.nodes[e].failedRunning=!1}))),t.loading={progress:e,max:n},b.c.setState(t)},retryTxOnTimeout:1,customTxTimeoutMs:2e4,commitment:{skipPreflight:!0,commitment:"single"}}},g=function(){var t=Object(a.a)(r.a.mark((function t(e,n,c,i){var u,p,h,x,O,g,y;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.malloc){t.next=3;break}return alert("Please connect your wallet before running a flow"),t.abrupt("return");case 3:return window.onbeforeunload=function(t){var e="Exiting may prematurely end your flow";return(t=t||window.event)&&(t.returnValue=e),t.preventDefault(),e},c(!0),u=Object.keys(e.construction.source.mints),t.next=8,Promise.all(u.map(function(){var t=Object(a.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s.WRAPPED_SOL_MINT.equals(new d.PublicKey(e))){t.next=2;break}return t.abrupt("return",n.publicKey);case 2:return t.abrupt("return",l.utils.tokens.getTokenAccountUsedByMalloc(n.publicKey,e));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 8:if(p=t.sent,i||(Object.keys(e.construction.actionDatas).map((function(t){e.context.nodes[t].successfullyRan=!1,e.context.nodes[t].failedRunning=!1})),b.c.setState(e)),t.prev=10,!i){t.next=27;break}if(h=Object(f.a)()){t.next=17;break}return alert("Cannot rerun a flow which has yet to run"),c(!1),t.abrupt("return");case 17:return t.next=19,e.malloc.build(e.construction,j.MallocSPLBuildActionMap,{cleanupAtEnd:!0});case 19:return x=t.sent,t.next=22,e.malloc.compileConstruction({construction:x,actionMap:j.MallocSPLBuildActionMap,amountInAccounts:p,opts:{cleanupAtEnd:!0,constructionAccount:h}});case 22:return O=t.sent,t.next=25,e.malloc.runConstructionFromAction(O,i,m(e));case 25:t.next=36;break;case 27:return t.next=29,e.malloc.build(e.construction,j.MallocSPLBuildActionMap,{cleanupAtEnd:!0});case 29:return g=t.sent,t.next=32,e.malloc.compileConstruction({construction:g,actionMap:j.MallocSPLBuildActionMap,amountInAccounts:p,opts:{cleanupAtEnd:!0}});case 32:return y=t.sent,Object(f.b)(y.constructionSigner),t.next=36,e.malloc.runConstruction(y,m(e));case 36:alert("Flow ran successfully!"),e.loading=void 0,b.c.setState(e),b.b.setState(Object(o.a)(Object(o.a)({},b.b.state),{},{failedAction:void 0})),t.next=46;break;case 42:t.prev=42,t.t0=t.catch(10),console.error("An error occurred running the flow",t.t0),v(t.t0,e,b.b.state);case 46:window.onbeforeunload=null,c(!1);case 48:case"end":return t.stop()}}),t,null,[[10,42]])})));return function(e,n,c,o){return t.apply(this,arguments)}}(),y=function(t){for(var e=b.c.state,n=0,i=Object.entries(e.context.nodes);n<i.length;n++){var r=Object(c.a)(i[n],2),a=r[0],s=r[1];a!=t&&s.outEdges[t]&&(delete s.outEdges[t],s.isSource?delete e.construction.source.nextActions[t]:delete e.construction.actionDatas[a].action.nextActions[e.context.selectedOutMintIndex][t])}delete e.context.nodes[t],delete e.construction.actionDatas[t],e.context.selectedNodeId="SOURCE",b.c.setState(Object(o.a)({},e))}}).call(this,n(14).Buffer)},165:function(t,e,n){"use strict";n.d(e,"c",(function(){return O})),n.d(e,"b",(function(){return m}));var c=n(21),o=n(22),i=n(27),r=n(15),a=n(0),s=n.n(a),u=n(661),l=n.n(u),d=n(129),b=n(53),j=n(36),f=n(66),p=n(79),h=n(69),v=n(4),x=function(t,e,n,c){return[Math.round(Math.random()*(n-t)+t),Math.round(Math.random()*(c-e)+e)]},O=function(t){for(var e=t.context.nodes,n={nodes:{},translate:t.context.translate,scale:t.context.scale},c=0,o=Object.entries(e);c<o.length;c++){var i=Object(r.a)(o[c],2),a=i[0],s=i[1];n.nodes[a]=s.pos}return n},m=function(t,e){var n=t.construction.source.nextActions,c=t.construction.actionDatas,a=t.context.nodes,s=a[p.a];s.selected=!0;for(var u=0,l=Object.entries(n);u<l.length;u++){var b=Object(r.a)(l[u],2),f=b[0],h=(b[1],x(-100,-100,100,100)),v=new d.b(f,h);a[f]=v;var O=new d.a(s,v);s.outEdges[f]=O}for(var m=0,g=Object.keys(c);m<g.length;m++){var y=g[m];if(!a[y]){var S=x(-100,-100,100,100);a[y]=new d.b(y,S)}}for(var w=0,A=Object.keys(c);w<A.length;w++){var M,k=A[w],E=a[k],C=Object(i.a)(c[k].action.nextActions);try{for(C.s();!(M=C.n()).done;)for(var D=M.value,T=0,U=Object.keys(D);T<U.length;T++){var P=U[T],N=a[P],L=new d.a(E,N);E.outEdges[P]=L}}catch(X){C.e(X)}finally{C.f()}}if(e){t.context.translate=e.translate,t.context.scale=e.scale;for(var R=0,F=Object.entries(e.nodes);R<F.length;R++){var I=Object(r.a)(F[R],2),B=I[0],W=I[1];t.context.nodes[B].pos=W}}j.c.setState(Object(o.a)({},t))};function g(t,e){t.nodes[t.selectedNodeId].selected=!1,t.selectedNodeId=e,t.nodes[t.selectedNodeId].selected=!0}e.a=function(){var t,e,n=Object(b.useStore)(j.c),i=s.a.useState({height:500,width:500}),a=Object(r.a)(i,2),u=(a[0],a[1],n.context),x=!1,O=!1,m=function(t,e){return[t/u.scale-u.translate[0],e/u.scale-u.translate[1]]};return Object(v.jsx)(l.a,{setup:function(c,i){i;var a=function(t,e){if(!e[t])for(var n=e.length;n<=t;n++)e.push({});return e};c.createCanvas(i.clientWidth,500).parent(i).mouseClicked((function(t){for(var e=0,c=Object.entries(u.nodes);e<c.length;e++){var i=Object(r.a)(c[e],2),a=i[0];i[1].hover&&g(u,a)}j.c.setState(Object(o.a)({},n))})).doubleClicked((function(t){var e=Object.values(f.splConstants.BUILD_ACTION_UIDS)[u.selectedActionType],i=Object.keys(f.splConstants.BUILD_ACTION_UIDS)[u.selectedActionType]+"-"+function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*c));return e}(5);u.nodes[i]=new d.b(i,m(c.mouseX,c.mouseY)),g(u,i);var r={actionTypeUID:e,actionPID:f.splConstants.PIDS.MAINNET.CPI_ACTION,inputs:{},nextActions:[]};n.construction.actionDatas[i]={action:r},j.c.setState(Object(o.a)({},n))})).mousePressed((function(n){for(var o=0,i=Object.entries(u.nodes);o<i.length;o++){var a=Object(r.a)(i[o],2),s=(a[0],a[1]);if(s.hover)return x=!0,void(t=s);if(s.hover2)return O=!0,t=s,(e=new d.b("temp",m(c.mouseX,c.mouseY))).r=0,void(u.activeEdge=new d.a(t,e))}})).mouseReleased((function(e){if(x&&(x=!1),O){for(var c=0,i=Object.entries(u.nodes);c<i.length;c++){var s=Object(r.a)(i[c],2),l=(s[0],s[1]);if(l.hover2&&l!=t){var b=new d.a(t,l);if(t.outEdges[l.id]=b,t.id===p.a)n.construction.source.nextActions[l.id]=100;else{var f=n.construction.actionDatas[t.id],h=u.selectedOutMintIndex;a(h,f.action.nextActions)[h][l.id]=100}j.c.setState(Object(o.a)({},n))}}O=!1,u.activeEdge=null}})).mouseMoved((function(n){x&&(t.pos=m(c.mouseX,c.mouseY)),O&&(e.pos=m(c.mouseX,c.mouseY));for(var o=m(c.mouseX,c.mouseY),i=Object(r.a)(o,2),a=i[0],s=i[1],l=0,d=Object.entries(u.nodes);l<d.length;l++){var b=Object(r.a)(d[l],2);b[0];b[1].updateHover(a,s)}})).mouseWheel((function(t){u.translate[0]-=t.deltaX,u.translate[1]-=t.deltaY})),u.translate=[c.width/2,c.height/2]},draw:function(t){t.background(h.a),t.noStroke(),t.fill(h.b);t.rect(0,0,t.width,t.height,20,20,20,20),t.push(),t.translate(t.createVector.apply(t,Object(c.a)(u.translate))),t.scale(u.scale),null!=u.activeEdge&&u.activeEdge.draw(t);for(var e=0,n=Object.entries(u.nodes);e<n.length;e++)for(var o=Object(r.a)(n[e],2),i=(o[0],o[1]),a=0,s=Object.entries(i.outEdges);a<s.length;a++){var l=Object(r.a)(s[a],2);l[0];l[1].draw(t)}for(var d=0,b=Object.entries(u.nodes);d<b.length;d++){var j=Object(r.a)(b[d],2);j[0];j[1].draw(t)}t.pop()},windowResized:function(t){var e=document.getElementById("graph-container"),n=document.getElementById("canvas-container");n.style.display="none",t.resizeCanvas(e.clientWidth,500),n.style.display="block"}})}},36:function(t,e,n){"use strict";n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return v})),n.d(e,"d",(function(){return x})),n.d(e,"a",(function(){return O}));var c=n(1),o=n.n(c),i=n(22),r=n(8),a=n(53),s=n(660),u=n.n(s),l=function(t,e){if(t){e||(e="console.json"),"object"===typeof t&&(t=JSON.stringify(t,void 0,4));var n=new Blob([t],{type:"text/json"}),c=document.createEvent("MouseEvents"),o=document.createElement("a");o.download=e,o.href=window.URL.createObjectURL(n),o.dataset.downloadurl=["text/json",o.download,o.href].join(":"),c.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(c)}else console.error("No data")},d=function(){var t=Object(r.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u()({accept:"application/json"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b={construction:{actionDatas:{swapToUsdc:{action:{actionTypeUID:"MALLOC_SPL_RAYDIUM_SWAP",actionPID:"muZ8k7AinSTHUwyDU34FL9Ebfy2SdAPHFbMLpnUC6yM",inputs:{outMint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"},nextActions:[{lpDepositUsdcRay:1}]}},lpDepositUsdcRay:{action:{actionPID:"muZ8k7AinSTHUwyDU34FL9Ebfy2SdAPHFbMLpnUC6yM",actionTypeUID:"MALLOC_SPL_RAYDIUM_LP_DEPOSIT",inputs:{},nextActions:[{farmUsdcRay:1}]}},farmUsdcRay:{action:{actionPID:"muZ8k7AinSTHUwyDU34FL9Ebfy2SdAPHFbMLpnUC6yM",actionTypeUID:"MALLOC_SPL_RAYDIUM_LP_STAKE_FARM",inputs:{},nextActions:[]}},swapToRay:{action:{actionTypeUID:"MALLOC_SPL_RAYDIUM_SWAP",actionPID:"muZ8k7AinSTHUwyDU34FL9Ebfy2SdAPHFbMLpnUC6yM",inputs:{outMint:"4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"},nextActions:[{lpDepositSolRay:1,lpDepositUsdcRay:1}]}},lpDepositSolRay:{action:{actionPID:"muZ8k7AinSTHUwyDU34FL9Ebfy2SdAPHFbMLpnUC6yM",actionTypeUID:"MALLOC_SPL_RAYDIUM_LP_DEPOSIT",inputs:{hasFarm:!0},nextActions:[{farmSolRay:1}]}},farmSolRay:{action:{actionPID:"muZ8k7AinSTHUwyDU34FL9Ebfy2SdAPHFbMLpnUC6yM",actionTypeUID:"MALLOC_SPL_RAYDIUM_LP_STAKE_FARM",inputs:{},nextActions:[]}}},source:{nextActions:{swapToRay:100,lpDepositSolRay:100,swapToUsdc:100},mints:{So11111111111111111111111111111111111111112:"2000"}}},savedContext:{nodes:{SOURCE:[-183.15625,-19],swapToRay:[-60.15625,-37],lpDepositSolRay:[-47.15625,-168],swapToUsdc:[-52.15625,79],lpDepositUsdcRay:[50.84375,10.984375],farmUsdcRay:[203.84375,14],farmSolRay:[87.84375,-172]},translate:[316.5,250],scale:1}},j=n(129),f=n(165),p={construction:b.construction,context:j.c},h=new a.Store(p),v=new a.Store({changeToggle:!1});Object(f.b)(p,b.savedContext);var x=function(){var t=Object(r.a)(o.a.mark((function t(){var e,n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d();case 2:if(!((e=t.sent).length<1)){t.next=6;break}return alert("Please select a file"),t.abrupt("return");case 6:return t.t0=JSON,t.next=9,e[0].text();case 9:t.t1=t.sent,n=t.t0.parse.call(t.t0,t.t1),(c=h.state).construction=n.construction,Object(f.b)(c,n.savedContext),h.setState(Object(i.a)({},c));case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Object(r.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={construction:h.state.construction,savedContext:Object(f.c)(h.state)},t.next=3,l(JSON.stringify(e),"flow.json");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();h.on(a.StoreEventType.Update,(function(){return console.info(new Date,"Updated Global Store")}))},421:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a}));var c=n(21),o=n(5),i="ConstructionSigner",r=function(t){window.localStorage.setItem(i,JSON.stringify(Object(c.a)(t.secretKey)))},a=function(){var t=window.localStorage.getItem(i);if(t){var e=JSON.parse(t),n=new Uint8Array(e);return o.Keypair.fromSecretKey(n)}}},662:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var c=n(22),o=n(36),i=function(t,e,n){o.b.setState(Object(c.a)(Object(c.a)({},e),{},{failedAction:n,changeToggle:!e.changeToggle,message:t}))}},69:function(t,e,n){"use strict";n.d(e,"g",(function(){return c})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return l}));var c="#F14A21",o=getComputedStyle(document.body),i=o.getPropertyValue("--light-1"),r=o.getPropertyValue("--light-2"),a=o.getPropertyValue("--green-1"),s=a+"55",u=(o.getPropertyValue("--green-2"),o.getPropertyValue("--dark-1"),o.getPropertyValue("--dark-2")),l=o.getPropertyValue("--dark-3")},697:function(t,e,n){},698:function(t,e,n){},703:function(t,e){},705:function(t,e){},721:function(t,e){},722:function(t,e){},79:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return o}));var c="SOURCE",o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mainnet-beta";switch(t){case"mainnet-beta":return{solana:{RPC:"https://ssc-dao.genesysgo.net/",NETWORK:t}};case"devnet":return{MALLOC_PROGRAM_ID:"9i4MAnhYagLr1vEo5jdmLehRe8Sm5Lx8fHaQNJfbFCve",mallocSpl:{TRANSFER_PROGRAM_ID:"ETpyJNQLorJbAcrPQpM9bkYxYMakegBh93kqZ1KnTBjr",SWAP_PROGRAM_ID:"7T6seoCvCQeUeSTf2EAwX5SnyrZvX7BFUMHi74ZodBKH",DUMMY_PASS_THROUGH:"DBhGd4VREBAw14vV1yaLXfCTtanPBwQfEErg1fe27diJ",MINT_TO:"77WQMNHSBe6BNdMY8R1FD4JX89o2fXr5FhKNerTcJsHJ",SOLEND_ACTION:"BVmJHQLHAAdgALGi6rdGxdsk5ate41kbpDMGL9XAVanP"},projectSerum:{DEX_PROGRAM_ID:"DESVgJVGajEgKGXhb6XmqDHGz3VjdgP7rEVESBgxmroY"},demo:{FAKE_USDC:"AkzN2jJrorpUY2ApfL2UsBeTfuv1XHFKGLQurZJg6BhN",FAKE_USDC_GD:"2BB7fDrLgBNSMCLqD835GisCHrHrGHsS8SJr6brtnWk2",FAKE_TOKEN_A:"9GmQdigrAFdX67EMrVFwMepEN8rEdMdp8CPUEPJRY8sj"},INITIAL_SPLITTER_ID_UUID:"initial",solana:{RPC:"https://explorer-api.devnet.solana.com",NETWORK:t}};default:throw"Unexpected env"}throw"Unexpected env"}},876:function(t,e,n){},877:function(t,e,n){},945:function(t,e){},947:function(t,e){},961:function(t,e){},965:function(t,e){},967:function(t,e){},977:function(t,e){},979:function(t,e){}},[[1051,1,2]]]);
//# sourceMappingURL=main.00b07820.chunk.js.map